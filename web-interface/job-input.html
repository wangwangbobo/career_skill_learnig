<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>èŒä½é€‰æ‹© - èŒé€”åŠ©æ‰‹AIæ±‚èŒå¤§å¸ˆ</title>
    
    <!-- åŠ è½½æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- åŠ è½½ Font Awesome å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- APIé…ç½®ç›¸å…³å…¨å±€å‡½æ•° -->
    <script>
        // å…¨å±€APIé…ç½®å‡½æ•°
        function openApiConfigModal() {
            console.log('ğŸš€ æ‰“å¼€APIé…ç½®æ¨¡æ€æ¡†');
            const apiConfigModal = document.getElementById('apiConfigModal');
            const apiKeyInput = document.getElementById('apiKey');
            const apiProviderSelect = document.getElementById('apiProvider');
            
            if (!apiConfigModal) {
                console.error('æ‰¾ä¸åˆ°APIé…ç½®æ¨¡æ€æ¡†');
                alert('APIé…ç½®æ¨¡æ€æ¡†æœªæ‰¾åˆ°ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                return;
            }
            
            // ä»localStorageåŠ è½½å·²ä¿å­˜çš„é…ç½®
            if (apiKeyInput) {
                const savedApiKey = localStorage.getItem('ai_learning_companion_api_key');
                apiKeyInput.value = savedApiKey || '';
            }
            
            if (apiProviderSelect) {
                const savedApiProvider = localStorage.getItem('apiProvider');
                apiProviderSelect.value = savedApiProvider || 'alibaba';
                // æ˜¾ç¤ºå¯¹åº”çš„æä¾›å•†ä¿¡æ¯
                if (typeof switchProviderInfo === 'function') {
                    switchProviderInfo(apiProviderSelect.value);
                }
            }
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            apiConfigModal.style.display = 'flex';
            apiConfigModal.classList.add('show');
            
            console.log('âœ… APIé…ç½®æ¨¡æ€æ¡†å·²æ˜¾ç¤º');
        }
        
        // å…¨å±€å…³é—­æ¨¡æ€æ¡†å‡½æ•°
        function closeApiConfigModal() {
            console.log('å…³é—­APIé…ç½®æ¨¡æ€æ¡†');
            const apiConfigModal = document.getElementById('apiConfigModal');
            if (apiConfigModal) {
                apiConfigModal.classList.remove('show');
                setTimeout(() => {
                    apiConfigModal.style.display = 'none';
                }, 300);
            }
        }
        
        // ç¡®ä¿å‡½æ•°ä¹Ÿåœ¨windowå¯¹è±¡ä¸Š
        window.openApiConfigModal = openApiConfigModal;
        window.closeApiConfigModal = closeApiConfigModal;
    </script>

    <!-- é¡µé¢ä¸“ç”¨æ ·å¼ -->
    <style>
        /* èŒä½é€‰æ‹©é¡µé¢ä¸“ç”¨æ ·å¼ */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* é¡¶éƒ¨å·¥å…·æ  */
        .top-toolbar {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            gap: 0.5rem;
        }
        
        .toolbar-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            font-size: 0.875rem;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            text-decoration: none;
            font-weight: 500;
        }
        
        .toolbar-btn:hover {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #6366f1;
            color: #6366f1;
            transform: translateY(-1px);
        }
        
        .toolbar-btn.configured {
            background: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
            color: #10b981;
        }
        
        .toolbar-btn.configured:hover {
            background: rgba(16, 185, 129, 0.2);
            border-color: #059669;
            color: #059669;
        }
        
        .toolbar-btn i {
            margin-right: 0.5rem;
            font-size: 0.875rem;
        }
        
        .job-input-container {
            width: 100%;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 1.5rem;
            box-sizing: border-box;
        }
        
        .input-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        /* æ¬¢è¿åŒºåŸŸ */
        .welcome-section {
            text-align: center;
            padding: 2rem 2rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .robot-avatar {
            font-size: 3rem;
            margin-bottom: 0.75rem;
            display: inline-block;
        }
        
        .welcome-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 0 0 0.25rem 0;
        }
        
        .welcome-subtitle {
            font-size: 1.5rem;
            font-weight: 500;
            margin: 0 0 0.75rem 0;
        }
        
        .welcome-description {
            font-size: 1rem;
            max-width: 800px;
            margin: 0 auto 1rem;
            line-height: 1.4;
        }
        
        /* èŒä½é€‰æ‹©åŒºåŸŸ */
        .job-selection {
            padding: 2rem;
            background: white;
        }
        
        .question-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 1.5rem 0;
            color: #111827;
        }
        
        /* é€‰é¡¹å¡ç‰‡ */
        .choice-options {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .choice-option {
            flex: 1;
            display: flex;
            align-items: center;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .choice-option:hover {
            border-color: #6366f1;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
        }
        
        .choice-option.selected {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }
        
        .choice-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: #6366f1;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .choice-content {
            flex: 1;
        }
        
        .choice-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin: 0 0 0.25rem 0;
            color: #111827;
        }
        
        .choice-description {
            font-size: 0.875rem;
            color: #6b7280;
            margin: 0;
        }
        
        /* è¾“å…¥è¯¦æƒ…å¡ç‰‡ */
        .input-details {
            padding: 0 2rem 2rem;
            display: none;
        }
        
        .input-section {
            margin-bottom: 2rem;
            display: none;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 1.125rem;
            font-weight: 600;
            color: #111827;
        }
        
        .section-header i {
            margin-right: 0.5rem;
            color: #6366f1;
        }
        
        /* ä¸Šä¼ æ–¹å¼é€‰é¡¹å¡ */
        .upload-method-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .method-tab {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.875rem;
            font-weight: 500;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .method-tab.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        
        /* ä¸Šä¼ åŒºåŸŸ */
        .upload-content {
            display: none;
            margin-bottom: 1.5rem;
        }
        
        .upload-content.active {
            display: block;
        }
        
        .upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            transition: border-color 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #6366f1;
        }
        
        .upload-area.active {
            border-color: #6366f1;
            background: rgba(99, 102, 241, 0.05);
        }
        
        .upload-icon {
            font-size: 2.5rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }
        
        .upload-text {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #111827;
        }
        
        .upload-hint {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }
        
        /* å¤šæ–‡ä»¶åˆ—è¡¨æ ·å¼ */
        .file-list {
            text-align: left;
            max-height: 120px;
            overflow-y: auto;
            padding: 0.5rem;
            background: #f9fafb;
            border-radius: 6px;
            margin-top: 0.5rem;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.25rem 0;
            font-size: 0.75rem;
            color: #4b5563;
        }
        
        .file-item:not(:last-child) {
            border-bottom: 1px solid #e5e7eb;
        }
        
        .upload-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            background: #6366f1;
            color: white;
            font-size: 0.875rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .upload-btn:hover {
            background: #4f46e5;
        }
        
        /* æ–‡æœ¬è¾“å…¥åŒºåŸŸ */
        .text-input-area {
            margin-bottom: 1.5rem;
        }
        
        .job-textarea {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-size: 0.875rem;
            line-height: 1.5;
            resize: vertical;
            min-height: 120px;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }
        
        .job-textarea:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        /* çƒ­é—¨èŒä½ */
        .popular-jobs {
            margin-bottom: 1.5rem;
        }
        
        .popular-jobs-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .popular-jobs-header i {
            color: #ef4444;
            margin-right: 0.5rem;
        }
        
        .popular-label {
            margin-right: 0.5rem;
        }
        
        .selected-job {
            font-weight: 500;
            color: #111827;
        }
        
        .job-tags-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        
        .job-tag {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            font-size: 0.875rem;
            text-align: center;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .job-tag:hover {
            border-color: #6366f1;
            color: #4f46e5;
        }
        
        .job-tag.selected {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
        }
        
        /* è‡ªå®šä¹‰è¾“å…¥ */
        .custom-job-input {
            margin-top: 1rem;
            display: none;
        }
        
        .job-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-size: 0.875rem;
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }
        
        .job-input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        /* ç¡®è®¤åŒºåŸŸ */
        .confirm-section {
            text-align: center;
            padding: 2.5rem 2rem;
            background: #f9fafb;
            border-radius: 12px;
            margin-top: 1rem;
        }
        
        .ready-question {
            margin-bottom: 1.5rem;
        }
        
        .ready-question h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.5rem 0;
            color: #111827;
        }
        
        .ready-question p {
            font-size: 0.875rem;
            color: #6b7280;
            margin: 0;
        }
        
        .generate-btn {
            padding: 1rem 2rem;
            border-radius: 8px;
            background: #6366f1;
            color: white;
            font-size: 1.125rem;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
            display: inline-flex;
            align-items: center;
            min-height: 56px;
        }
        
        .generate-btn:not(:disabled):hover {
            background: #4f46e5;
        }
        
        .generate-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        .generate-btn i {
            margin-right: 0.5rem;
        }
        
        /* APIé…ç½®æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.show {
            display: flex !important;
        }
        
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .modal-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            z-index: 10001;
            position: relative;
        }
        
        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #f9fafb;
        }
        
        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            display: flex;
            align-items: center;
        }
        
        .modal-header h3 i {
            margin-right: 0.75rem;
            color: #6366f1;
        }
        
        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            border: none;
            background: #f3f4f6;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 1.5rem;
        }
        
        .modal-description {
            margin: 0 0 1.5rem 0;
            color: #6b7280;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #111827;
        }
        
        .key-input-container {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .modal-input {
            width: 100%;
            padding: 0.75rem 1rem;
            padding-right: 3rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.875rem;
            box-sizing: border-box;
        }
        
        .toggle-btn {
            position: absolute;
            right: 0.75rem;
            width: 28px;
            height: 28px;
            border: none;
            background: none;
            color: #6b7280;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .provider-select {
            margin-bottom: 1.5rem;
        }
        
        .modal-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.875rem;
            background: white;
            box-sizing: border-box;
        }
        
        .provider-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #f9fafb;
        }
        
        .provider-details h4 {
            margin: 0 0 0.25rem 0;
            font-size: 1rem;
            font-weight: 600;
            color: #111827;
        }
        
        .provider-details p {
            margin: 0 0 0.5rem 0;
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .provider-link {
            font-size: 0.875rem;
            color: #6366f1;
            text-decoration: none;
            font-weight: 500;
        }
        
        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.75rem;
            justify-content: space-between;
            background: #f9fafb;
        }
        
        .modal-btn {
            padding: 0.625rem 1.25rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .modal-btn-test {
            background: #3b82f6;
            color: white;
            margin-right: auto;
        }
        
        .modal-btn-test:hover {
            background: #2563eb;
        }
        
        .modal-btn-test:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .modal-btn-test.testing {
            background: #f59e0b;
        }
        
        .modal-btn-test.success {
            background: #10b981;
        }
        
        .modal-btn-test.error {
            background: #ef4444;
        }
        
        .modal-btn-cancel {
            background: #f3f4f6;
            color: #374151;
        }
        
        .modal-btn-confirm {
            background: #6366f1;
            color: white;
        }
        
        /* å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†æ ·å¼ - ä¸index.htmlå®Œå…¨ä¸€è‡´ */
        .content-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 10001;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .content-modal.show {
            display: flex;
        }
        
        .content-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }
        
        .content-modal-content {
            position: relative;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 700px;
            max-height: 90vh;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }
        
        .content-header {
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .content-header h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .content-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }
        
        .content-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .content-body {
            padding: 2rem;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .content-description {
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .content-description p {
            color: #6b7280;
            font-size: 1.1rem;
            margin: 0;
        }
        
        .content-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 1.2rem;
            max-height: 400px;
        }
        
        /* ç¬¬5ä¸ªé€‰é¡¹ï¼ˆæ¨èè¯¾ç¨‹ï¼‰åœ¨ç¬¬äºŒæ’å±…ä¸­æ˜¾ç¤º */
        .content-option:nth-child(5) {
            grid-column: 2 / 3;
            grid-row: 2;
        }
        
        .content-option {
            cursor: pointer;
            display: block;
            position: relative;
        }
        
        .content-option input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }
        
        .option-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1;
        }
        
        /* é€‰ä¸­çŠ¶æ€çš„å¯¹å‹¾æ ‡å¿— */
        .option-card::after {
            content: '\2713';
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 24px;
            height: 24px;
            background: #10b981;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            opacity: 0;
            transform: scale(0);
            transition: all 0.2s ease;
            z-index: 3;
        }
        
        .content-option input:checked + .option-card {
            border-color: #6366f1;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.2);
        }
        
        .content-option input:checked + .option-card::before {
            opacity: 0.1;
        }
        
        /* æ˜¾ç¤ºé€‰ä¸­çŠ¶æ€çš„å¯¹å‹¾ */
        .content-option input:checked + .option-card::after {
            opacity: 1;
            transform: scale(1);
        }
        
        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .option-card i {
            font-size: 2rem;
            color: #6366f1;
            margin-bottom: 0.75rem;
            display: block;
            position: relative;
            z-index: 2;
        }
        
        .option-card h4 {
            margin: 0 0 0.4rem 0;
            font-size: 1.1rem;
            color: #111827;
            position: relative;
            z-index: 2;
        }
        
        .option-card p {
            margin: 0;
            color: #6b7280;
            font-size: 0.85rem;
            line-height: 1.4;
            position: relative;
            z-index: 2;
        }
        
        .content-footer {
            padding: 2rem;
            background: #f9fafb;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .content-btn {
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .content-btn-cancel {
            background: white;
            color: #6b7280;
            border: 1px solid #e5e7eb;
        }
        
        .content-btn-cancel:hover {
            background: #f9fafb;
            color: #111827;
        }
        
        .content-btn-confirm {
            background: #6366f1;
            color: white;
        }
        
        .content-btn-confirm:hover {
            background: #4f46e5;
        }
        
        .content-btn-confirm:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .choice-options {
                flex-direction: column;
            }
            
            .job-input-container {
                padding: 1rem;
            }
            
            .welcome-section {
                padding: 1.5rem 1rem 1rem;
            }
            
            .welcome-title {
                font-size: 1.75rem;
            }
            
            .welcome-subtitle {
                font-size: 1.25rem;
            }
            
            .job-selection {
                padding: 1.5rem;
            }
            
            .confirm-section {
                padding: 1.5rem;
            }
            
            .top-toolbar {
                top: 0.5rem;
                right: 0.5rem;
            }
            
            /* å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†ç§»åŠ¨ç«¯é€‚é… */
            .content-modal {
                padding: 1rem;
            }
            
            .content-modal-content {
                max-width: 100%;
            }
            
            .content-header {
                padding: 1.5rem;
            }
            
            .content-body {
                padding: 1.5rem;
            }
            
            .content-options {
                grid-template-columns: repeat(2, 1fr); /* ç§»åŠ¨ç«¯æ˜¾ç¤º2åˆ— */
                grid-template-rows: repeat(3, 1fr); /* 3è¡Œï¼Œæœ€åä¸€è¡Œåªæœ‰1ä¸ª */
                gap: 1rem;
                max-height: 500px;
            }
            
            .content-footer {
                padding: 1rem;
                flex-direction: column;
            }
            
            .content-btn {
                width: 100%;
                justify-content: center;
            }
            
            .content-header {
                padding: 1rem;
            }
            
            .content-header h3 {
                font-size: 1.125rem;
            }
            
            .content-body {
                padding: 1rem;
            }
            
            .content-footer {
                padding: 1rem;
                flex-direction: column;
            }
            
            .content-btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="top-toolbar">
        <button class="toolbar-btn" onclick="openApiConfigModal()">
            <i class="fas fa-cog"></i>
            é…ç½®APIå¯†é’¥
        </button>
    </div>

    <div class="job-input-container">
        <!-- æ¬¢è¿åŒºåŸŸ -->
        <div class="input-card">
            <div class="welcome-section">
                <div class="robot-avatar">
                    ğŸ¤–
                </div>
                <h1 class="welcome-title">èŒé€”ä¼´ä¾£</h1>
                <p class="welcome-description">æˆ‘æ˜¯ä½ çš„èŒä¸šæŠ€èƒ½æå‡ä¼´ä¾£ï¼Œæˆ‘å¯ä»¥æ ¹æ®ä½ æä¾›çš„èŒä½ä¿¡æ¯ä¸ºä½ åˆ¶å®šä¸“å±å­¦ä¹ è·¯çº¿ï¼Œ
                    æ ¹æ®ä½ çš„å­¦ä¹ æƒ…å†µåŠ¨æ€è°ƒæ•´å­¦ä¹ å†…å®¹ï¼Œæä¾›ä»å²—ä½åˆ†æåˆ°é¢è¯•å‡†å¤‡çš„å…¨æ–¹ä½æ”¯æŒï¼ŒåŠ©åŠ›ä½ è¿…é€Ÿæå‡èŒä¸šæŠ€èƒ½ï¼Œè½»æ¾æ‹¿ä¸‹offer~</p>
            </div>
            
            <!-- èŒä½é€‰æ‹©åŒºåŸŸ -->
            <div class="job-selection">
                <h2 class="question-title">æ‚¨æ˜¯å¦æœ‰ç›®æ ‡èŒä½ï¼Ÿ</h2>
                
                <!-- é€‰æ‹©é€‰é¡¹ -->
                <div class="choice-options">
                    <!-- é€‰é¡¹1ï¼šæœ‰ç›®æ ‡èŒä½ -->
                    <div class="choice-option" id="hasTargetJob" data-choice="has-target">
                        <div class="choice-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <div class="choice-content">
                            <h3 class="choice-title">æ˜¯ï¼Œæˆ‘æœ‰ç›®æ ‡èŒä½</h3>
                            <p class="choice-description">ä¸Šä¼ èŒä½æè¿°æ–‡ä»¶æˆ–ç²˜è´´JDå†…å®¹</p>
                        </div>
                    </div>
                    
                    <!-- é€‰é¡¹2ï¼šæ²¡æœ‰ç›®æ ‡èŒä½ -->
                    <div class="choice-option" id="noTargetJob" data-choice="no-target">
                        <div class="choice-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="choice-content">
                            <h3 class="choice-title">æ²¡æœ‰ï¼Œæˆ‘æƒ³æ¢ç´¢å²—ä½</h3>
                            <p class="choice-description">ä»çƒ­é—¨èŒä½ä¸­é€‰æ‹©æˆ–è¾“å…¥æ„Ÿå…´è¶£çš„å²—ä½åç§°</p>
                        </div>
                    </div>
                </div>
                
                <!-- å…·ä½“è¾“å…¥åŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ -->
                <div class="input-details" id="inputDetails">
                    <!-- ä¸Šä¼ èŒä½æè¿°åŒºåŸŸ -->
                    <div class="input-section" id="uploadSection">
                        <div class="section-header">
                            <i class="fas fa-upload"></i>
                            <span>ä¸Šä¼ æˆ–è¾“å…¥èŒä½ä¿¡æ¯</span>
                        </div>
                        
                        <div class="upload-method-tabs">
                            <button class="method-tab active" id="fileUploadTab">ä¸Šä¼ èŒä½æè¿°</button>
                            <button class="method-tab" id="textInputTab">æˆ–è€…ç›´æ¥è¾“å…¥</button>
                        </div>
                        
                        <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                        <div class="upload-content active" id="fileUploadContent">
                            <div class="upload-area" id="uploadArea">
                                <div class="upload-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <p class="upload-text">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                                <p class="upload-hint">æ”¯æŒ TXTã€DOCã€DOCXã€PDF æ ¼å¼ï¼Œå¯é€‰æ‹©å¤šä¸ªæ–‡ä»¶ï¼Œå•æ–‡ä»¶æœ€å¤§ 10MB</p>
                                <input type="file" id="fileInput" accept=".txt,.doc,.docx,.pdf,image/*" multiple style="display: none;">
                                <button class="upload-btn" id="uploadBtn">
                                    é€‰æ‹©æ–‡ä»¶(æ”¯æŒå¤šé€‰)
                                </button>
                            </div>
                        </div>
                        
                        <!-- æ–‡æœ¬è¾“å…¥åŒºåŸŸ -->
                        <div class="upload-content" id="textInputContent">
                            <div class="text-input-area">
                                <textarea 
                                    id="jobDescription" 
                                    placeholder="ç²˜è´´èŒä½æè¿°å†…å®¹..."
                                    class="job-textarea"
                                    rows="8"
                                ></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- é€‰æ‹©å²—ä½åŒºåŸŸ -->
                    <div class="input-section" id="selectJobSection">
                        <div class="section-header">
                            <i class="fas fa-search"></i>
                            <span>é€‰æ‹©æˆ–è¾“å…¥å²—ä½</span>
                        </div>
                        
                        <!-- çƒ­é—¨èŒä½æ ‡ç­¾ -->
                        <div class="popular-jobs">
                            <div class="popular-jobs-header">
                                <i class="fas fa-fire"></i>
                                <span class="popular-label">çƒ­é—¨èŒä½ï¼š</span>
                                <span class="selected-job" id="selectedJobDisplay">å·²é€‰æ‹©ï¼šåç«¯å·¥ç¨‹å¸ˆ</span>
                            </div>
                            <div class="job-tags-grid">
                                <button class="job-tag" data-job="å‰ç«¯å·¥ç¨‹å¸ˆ">å‰ç«¯å·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag selected" data-job="åç«¯å·¥ç¨‹å¸ˆ">åç«¯å·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag" data-job="AIå·¥ç¨‹å¸ˆ">AIå·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag" data-job="äº§å“ç»ç†">äº§å“ç»ç†</button>
                                <button class="job-tag" data-job="æ•°æ®åˆ†æå¸ˆ">æ•°æ®åˆ†æå¸ˆ</button>
                                <button class="job-tag" data-job="UIè®¾è®¡å¸ˆ">UIè®¾è®¡å¸ˆ</button>
                                <button class="job-tag" data-job="æµ‹è¯•å·¥ç¨‹å¸ˆ">æµ‹è¯•å·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag" data-job="DevOpså·¥ç¨‹å¸ˆ">DevOpså·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag" data-job="ç§»åŠ¨ç«¯å¼€å‘">ç§»åŠ¨ç«¯å¼€å‘</button>
                                <button class="job-tag" data-job="å…¨æ ˆå·¥ç¨‹å¸ˆ">å…¨æ ˆå·¥ç¨‹å¸ˆ</button>
                                <button class="job-tag custom-input" data-job="custom">å…¶ä»–èŒä½</button>
                            </div>
                            
                            <!-- è‡ªå®šä¹‰è¾“å…¥æ¡†ï¼ˆç´§è·Ÿåœ¨çƒ­é—¨èŒä½ä¸‹é¢ï¼‰ -->
                            <div class="custom-job-input" id="customJobInput">
                                <input 
                                    type="text" 
                                    id="jobTitle" 
                                    placeholder="è¯·è¾“å…¥æ‚¨æ„Ÿå…´è¶£çš„èŒä½åç§°..." 
                                    class="job-input"
                                >
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç¡®è®¤æŒ‰é’®åŒºåŸŸ -->
                    <div class="confirm-section">
                        <div class="ready-question">
                            <h3>å‡†å¤‡å¥½äº†å—ï¼Ÿ</h3>
                            <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆæ‚¨çš„ä¸“å±å­¦ä¹ è·¯çº¿</p>
                        </div>
                        <button id="generateBtn" class="generate-btn">
                            <i class="fas fa-book"></i>
                            <span>ç”Ÿæˆå­¦ä¹ è·¯çº¿</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- é¡µé¢è„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–å…ƒç´ 
            const hasTargetJob = document.getElementById('hasTargetJob');
            const noTargetJob = document.getElementById('noTargetJob');
            const inputDetails = document.getElementById('inputDetails');
            const uploadSection = document.getElementById('uploadSection');
            const selectJobSection = document.getElementById('selectJobSection');
            const fileUploadTab = document.getElementById('fileUploadTab');
            const textInputTab = document.getElementById('textInputTab');
            const fileUploadContent = document.getElementById('fileUploadContent');
            const textInputContent = document.getElementById('textInputContent');
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const uploadBtn = document.getElementById('uploadBtn');
            const jobTags = document.querySelectorAll('.job-tag');
            const selectedJobDisplay = document.getElementById('selectedJobDisplay');
            const customJobInput = document.getElementById('customJobInput');
            const jobTitle = document.getElementById('jobTitle');
            const jobDescription = document.getElementById('jobDescription');
            const generateBtn = document.getElementById('generateBtn');
            
            // å½“å‰é€‰æ‹©çŠ¶æ€
            let currentChoice = null;
            let selectedJob = 'åç«¯å·¥ç¨‹å¸ˆ';
            let uploadedFiles = []; // å­˜å‚¨å¤šä¸ªæ–‡ä»¶
            
            // 1. å¤„ç†èŒä½é€‰æ‹©é€‰é¡¹ç‚¹å‡»
            hasTargetJob.addEventListener('click', function() {
                // æ›´æ–°é€‰æ‹©çŠ¶æ€
                currentChoice = 'has-target';
                hasTargetJob.classList.add('selected');
                noTargetJob.classList.remove('selected');
                
                // æ˜¾ç¤ºç›¸åº”çš„è¾“å…¥åŒºåŸŸ
                inputDetails.style.display = 'block';
                uploadSection.style.display = 'block';
                selectJobSection.style.display = 'none';
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            noTargetJob.addEventListener('click', function() {
                // æ›´æ–°é€‰æ‹©çŠ¶æ€
                currentChoice = 'no-target';
                noTargetJob.classList.add('selected');
                hasTargetJob.classList.remove('selected');
                
                // æ˜¾ç¤ºç›¸åº”çš„è¾“å…¥åŒºåŸŸ
                inputDetails.style.display = 'block';
                uploadSection.style.display = 'none';
                selectJobSection.style.display = 'block';
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            // 2. å¤„ç†ä¸Šä¼ æ–¹å¼é€‰é¡¹å¡
            fileUploadTab.addEventListener('click', function() {
                fileUploadTab.classList.add('active');
                textInputTab.classList.remove('active');
                fileUploadContent.classList.add('active');
                textInputContent.classList.remove('active');
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            textInputTab.addEventListener('click', function() {
                textInputTab.classList.add('active');
                fileUploadTab.classList.remove('active');
                textInputContent.classList.add('active');
                fileUploadContent.classList.remove('active');
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            // 3. å¤„ç†æ–‡ä»¶ä¸Šä¼ 
            uploadBtn.addEventListener('click', function() {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    uploadedFiles = Array.from(e.target.files);
                    handleFileUpload(uploadedFiles);
                }
            });
            
            // æ‹–æ”¾æ–‡ä»¶ä¸Šä¼ 
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                uploadArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                uploadArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                uploadArea.classList.add('active');
            }
            
            function unhighlight() {
                uploadArea.classList.remove('active');
            }
            
            uploadArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    uploadedFiles = Array.from(files);
                    handleFileUpload(uploadedFiles);
                }
            }
            
            function handleFileUpload(files) {
                const uploadText = document.querySelector('.upload-text');
                const uploadHint = document.querySelector('.upload-hint');
                
                if (files.length === 1) {
                    // å•ä¸ªæ–‡ä»¶
                    uploadText.textContent = `å·²é€‰æ‹©æ–‡ä»¶: ${files[0].name}`;
                    uploadHint.textContent = `æ–‡ä»¶å¤§å°: ${(files[0].size / 1024 / 1024).toFixed(2)} MB`;
                } else {
                    // å¤šä¸ªæ–‡ä»¶
                    uploadText.textContent = `å·²é€‰æ‹© ${files.length} ä¸ªæ–‡ä»¶`;
                    const totalSize = files.reduce((sum, file) => sum + file.size, 0);
                    uploadHint.innerHTML = `
                        <div style="text-align: left; margin-top: 0.5rem;">
                            <div>æ€»å¤§å°: ${(totalSize / 1024 / 1024).toFixed(2)} MB</div>
                            <div style="margin-top: 0.25rem; font-size: 0.75rem; color: #9ca3af;">
                                ${files.map(file => `â€¢ ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`).join('<br>')}
                            </div>
                        </div>
                    `;
                }
                
                // æ–‡ä»¶ç±»å‹å’Œå¤§å°éªŒè¯
                let hasError = false;
                const maxSize = 10 * 1024 * 1024; // 10MB
                const allowedTypes = ['.txt', '.doc', '.docx', '.pdf'];
                
                for (const file of files) {
                    // æ£€æŸ¥æ–‡ä»¶å¤§å°
                    if (file.size > maxSize) {
                        alert(`æ–‡ä»¶ "${file.name}" è¶…è¿‡10MBé™åˆ¶`);
                        hasError = true;
                        break;
                    }
                    
                    // æ£€æŸ¥æ–‡ä»¶ç±»å‹
                    const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
                    if (!allowedTypes.includes(fileExtension) && !file.type.startsWith('image/')) {
                        alert(`æ–‡ä»¶ "${file.name}" æ ¼å¼ä¸æ”¯æŒï¼Œè¯·é€‰æ‹© TXTã€DOCã€DOCXã€PDF æˆ–å›¾ç‰‡æ–‡ä»¶`);
                        hasError = true;
                        break;
                    }
                }
                
                if (hasError) {
                    uploadedFiles = [];
                    uploadText.textContent = 'æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶';
                    uploadHint.textContent = 'æ”¯æŒ TXTã€DOCã€DOCXã€PDF æ ¼å¼ï¼Œæœ€å¤§ 10MB';
                    return;
                }
                
                console.log('æ–‡ä»¶å·²ä¸Šä¼ :', files.map(f => ({ name: f.name, type: f.type, size: f.size })));
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            }
            
            // 4. å¤„ç†èŒä½æ ‡ç­¾é€‰æ‹©
            jobTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    const jobName = this.getAttribute('data-job');
                    
                    // ç‰¹æ®Šå¤„ç†è‡ªå®šä¹‰è¾“å…¥
                    if (jobName === 'custom') {
                        // é€‰ä¸­"å…¶ä»–èŒä½"æ ‡ç­¾
                        jobTags.forEach(t => t.classList.remove('selected'));
                        this.classList.add('selected');
                        
                        // æ˜¾ç¤ºè‡ªå®šä¹‰è¾“å…¥æ¡†
                        customJobInput.style.display = 'block';
                        selectedJob = '';
                        selectedJobDisplay.textContent = 'è¯·è¾“å…¥èŒä½åç§°';
                        
                        // èšç„¦åˆ°è¾“å…¥æ¡†
                        jobTitle.focus();
                    } else {
                        // é€‰ä¸­æ ‡ç­¾
                        jobTags.forEach(t => t.classList.remove('selected'));
                        this.classList.add('selected');
                        
                        // éšè—è‡ªå®šä¹‰è¾“å…¥æ¡†
                        customJobInput.style.display = 'none';
                        
                        // æ›´æ–°é€‰ä¸­çš„èŒä½
                        selectedJob = jobName;
                        selectedJobDisplay.textContent = `å·²é€‰æ‹©ï¼š${selectedJob}`;
                    }
                    
                    // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                    updateGenerateButtonState();
                });
            });
            
            // 5. å¤„ç†è‡ªå®šä¹‰èŒä½è¾“å…¥
            jobTitle.addEventListener('input', function() {
                selectedJob = this.value.trim();
                
                if (selectedJob) {
                    selectedJobDisplay.textContent = `å·²é€‰æ‹©ï¼š${selectedJob}`;
                } else {
                    selectedJobDisplay.textContent = 'è¯·è¾“å…¥èŒä½åç§°';
                }
                
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            // 6. å¤„ç†æ–‡æœ¬è¾“å…¥
            jobDescription.addEventListener('input', function() {
                // æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
                updateGenerateButtonState();
            });
            
            // 7. æ›´æ–°ç”ŸæˆæŒ‰é’®çŠ¶æ€
            function updateGenerateButtonState() {
                if (currentChoice === 'has-target') {
                    if (fileUploadTab.classList.contains('active')) {
                        // æ–‡ä»¶ä¸Šä¼ æ¨¡å¼
                        generateBtn.disabled = uploadedFiles.length === 0;
                    } else {
                        // æ–‡æœ¬è¾“å…¥æ¨¡å¼
                        generateBtn.disabled = !jobDescription.value.trim();
                    }
                } else if (currentChoice === 'no-target') {
                    // èŒä½é€‰æ‹©æ¨¡å¼
                    generateBtn.disabled = !selectedJob;
                } else {
                    // æœªé€‰æ‹©ä»»ä½•é€‰é¡¹
                    generateBtn.disabled = true;
                }
            }
            
            // 8. å¤„ç†ç”ŸæˆæŒ‰é’®ç‚¹å‡»
            generateBtn.addEventListener('click', function() {
                if (generateBtn.disabled) return;
                
                // æ˜¾ç¤ºå†…å®¹é€‰æ‹©æ¨¡æ€æ¡†
                showContentModal();
            });
            
            // åˆå§‹åŒ–è®¾ç½®
            updateGenerateButtonState();
            
            // æ£€æŸ¥å¹¶æ›´æ–°APIé…ç½®æŒ‰é’®çŠ¶æ€
            updateApiConfigButtonState();
            
            // åˆå§‹åŒ–å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†
            initContentModal();
            
            // æ˜¾ç¤ºå†…å®¹é€‰æ‹©æ¨¡æ€æ¡†çš„å‡½æ•°
            function showContentModal() {
                const contentModal = document.getElementById('contentModal');
                if (contentModal) {
                    contentModal.classList.add('show');
                    updateContentConfirmButton();
                    console.log('ğŸ“ å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†å·²æ˜¾ç¤º');
                }
            }
            
            // éšè—å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†çš„å‡½æ•°
            function hideContentModal() {
                const contentModal = document.getElementById('contentModal');
                if (contentModal) {
                    contentModal.classList.remove('show');
                    console.log('âŒ å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†å·²éšè—');
                }
            }
            
            // æ›´æ–°ç¡®è®¤æŒ‰é’®çŠ¶æ€
            function updateContentConfirmButton() {
                const contentOptions = document.querySelectorAll('input[name="contentType"]');
                const contentConfirm = document.getElementById('contentConfirm');
                
                if (contentOptions && contentConfirm) {
                    const checkedOptions = Array.from(contentOptions).filter(cb => cb.checked);
                    contentConfirm.disabled = checkedOptions.length === 0;
                    
                    if (checkedOptions.length === 0) {
                        contentConfirm.style.opacity = '0.6';
                        contentConfirm.style.cursor = 'not-allowed';
                    } else {
                        contentConfirm.style.opacity = '1';
                        contentConfirm.style.cursor = 'pointer';
                    }
                }
            }
            
            // åˆå§‹åŒ–å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†
            function initContentModal() {
                const contentModal = document.getElementById('contentModal');
                const contentOverlay = document.getElementById('contentOverlay');
                const contentClose = document.getElementById('contentClose');
                const contentCancel = document.getElementById('contentCancel');
                const contentConfirm = document.getElementById('contentConfirm');
                const contentOptions = document.querySelectorAll('input[name="contentType"]');
                
                // ç‚¹å‡»é®ç½©å±‚å…³é—­æ¨¡æ€æ¡†
                if (contentOverlay) {
                    contentOverlay.addEventListener('click', hideContentModal);
                }
                
                // ç‚¹å‡»å…³é—­æŒ‰é’®
                if (contentClose) {
                    contentClose.addEventListener('click', hideContentModal);
                }
                
                // ç‚¹å‡»å–æ¶ˆæŒ‰é’®
                if (contentCancel) {
                    contentCancel.addEventListener('click', hideContentModal);
                }
                
                // ç›‘å¬å¤é€‰æ¡†å˜åŒ–
                contentOptions.forEach(option => {
                    option.addEventListener('change', updateContentConfirmButton);
                });
                
                // ç‚¹å‡»ç¡®è®¤æŒ‰é’®
                if (contentConfirm) {
                    contentConfirm.addEventListener('click', function() {
                        if (this.disabled) return;
                        
                        // è·å–é€‰ä¸­çš„å†…å®¹ç±»å‹
                        const selectedTypes = Array.from(contentOptions)
                            .filter(cb => cb.checked)
                            .map(cb => cb.value);
                        
                        console.log('ğŸ” ç”¨æˆ·é€‰æ‹©çš„å†…å®¹ç±»å‹:', selectedTypes);
                        
                        // ä¿å­˜é€‰æ‹©åˆ°æœ¬åœ°å­˜å‚¨
                        localStorage.setItem('selectedContentTypes', JSON.stringify(selectedTypes));
                        localStorage.setItem('currentJob', selectedJob);
                        
                        if (currentChoice === 'has-target' && textInputTab.classList.contains('active')) {
                            localStorage.setItem('jobDescription', jobDescription.value.trim());
                        }
                        
                        // éšè—æ¨¡æ€æ¡†
                        hideContentModal();
                        
                        // æ˜¾ç¤ºåŠ è½½è¿›åº¦ç•Œé¢
                        const contentTypesStr = selectedTypes.map(type => {
                            const typeNames = {
                                'knowledge': 'çŸ¥è¯†ç‚¹',
                                'interview': 'é¢è¯•é¢˜',
                                'books': 'ä¹¦ç±',
                                'certificates': 'è¯ä¹¦',
                                'courses': 'è¯¾ç¨‹'
                            };
                            return typeNames[type] || type;
                        }).join(',');
                        
                        const url = `progress.html?job=${encodeURIComponent(selectedJob)}&types=${encodeURIComponent(contentTypesStr)}`;
                        console.log('ğŸš€ è·³è½¬åˆ°è¿›åº¦é¡µé¢:', url);
                        
                        window.location.href = url;
                    });
                }
                
                console.log('âœ… å†…å®¹é€‰æ‹©æ¨¡æ€æ¡†åˆå§‹åŒ–å®Œæˆ');
            }
            
            // APIé…ç½®ç›¸å…³äº‹ä»¶å¤„ç†
            setTimeout(() => {
                const apiConfigModal = document.getElementById('apiConfigModal');
                const apiConfigClose = document.getElementById('apiConfigClose');
                const apiConfigCancel = document.getElementById('apiConfigCancel');
                const apiConfigConfirm = document.getElementById('apiConfigConfirm');
                const testConnectionBtn = document.getElementById('testConnectionBtn');
                const toggleApiKey = document.getElementById('toggleApiKey');
                const apiKey = document.getElementById('apiKey');
                
                // åˆå§‹åŒ–æ¨¡æ€æ¡†äº‹ä»¶ç›‘å¬å™¨
                if (apiConfigClose) {
                    apiConfigClose.addEventListener('click', closeApiConfigModal);
                }
                
                if (apiConfigCancel) {
                    apiConfigCancel.addEventListener('click', closeApiConfigModal);
                }
                
                // ç‚¹å‡»é®ç½©å±‚å…³é—­æ¨¡æ€æ¡†
                const modalOverlay = apiConfigModal ? apiConfigModal.querySelector('.modal-overlay') : null;
                if (modalOverlay) {
                    modalOverlay.addEventListener('click', closeApiConfigModal);
                }
                
                // å¯†ç å¯è§æ€§åˆ‡æ¢
                if (toggleApiKey && apiKey) {
                    toggleApiKey.addEventListener('click', function() {
                        if (apiKey.type === 'password') {
                            apiKey.type = 'text';
                            this.querySelector('i').className = 'fas fa-eye-slash';
                        } else {
                            apiKey.type = 'password';
                            this.querySelector('i').className = 'fas fa-eye';
                        }
                    });
                }
                
                // æ¨¡å‹æä¾›å•†åˆ‡æ¢äº‹ä»¶
                const apiProviderSelect = document.getElementById('apiProvider');
                if (apiProviderSelect) {
                    // åˆå§‹åŒ–æ˜¾ç¤º
                    switchProviderInfo(apiProviderSelect.value);
                    
                    // ç›‘å¬é€‰æ‹©å˜åŒ–
                    apiProviderSelect.addEventListener('change', function() {
                        switchProviderInfo(this.value);
                    });
                }
                
                // è¿é€šæ€§æµ‹è¯•æŒ‰é’®äº‹ä»¶
                if (testConnectionBtn) {
                    testConnectionBtn.addEventListener('click', function() {
                        testApiConnection();
                    });
                }
                
                // ä¿å­˜APIé…ç½®
                if (apiConfigConfirm) {
                    apiConfigConfirm.addEventListener('click', function() {
                        const apiKeyValue = apiKey ? apiKey.value.trim() : '';
                        const apiProvider = document.getElementById('apiProvider');
                        const apiProviderValue = apiProvider ? apiProvider.value : 'alibaba';
                        
                        if (apiKeyValue) {
                            // ä¿å­˜åˆ°localStorage
                            localStorage.setItem('ai_learning_companion_api_key', apiKeyValue);
                            localStorage.setItem('apiProvider', apiProviderValue);
                            
                            console.log('APIé…ç½®å·²ä¿å­˜:', { provider: apiProviderValue, keyLength: apiKeyValue.length });
                            
                            // æ›´æ–°æŒ‰é’®çŠ¶æ€
                            updateApiConfigButtonState();
                            
                            // å…³é—­æ¨¡æ€æ¡†
                            closeApiConfigModal();
                            
                            console.log('âœ… APIé…ç½®å·²ä¿å­˜æˆåŠŸ');
                        } else {
                            alert('è¯·è¾“å…¥APIå¯†é’¥');
                        }
                    });
                }
            }, 100);
            
            // æ›´æ–°APIé…ç½®æŒ‰é’®çŠ¶æ€çš„å‡½æ•°
            function updateApiConfigButtonState() {
                const configBtn = document.querySelector('.toolbar-btn');
                const savedApiKey = localStorage.getItem('ai_learning_companion_api_key');
                
                if (configBtn) {
                    // æ¸…é™¤å†…è”æ ·å¼
                    configBtn.style.color = '';
                    configBtn.style.borderColor = '';
                    configBtn.style.background = '';
                    
                    if (savedApiKey && savedApiKey.trim()) {
                        // å·²é…ç½®çŠ¶æ€
                        configBtn.innerHTML = '<i class="fas fa-check-circle"></i> å·²é…ç½®API';
                        configBtn.classList.add('configured');
                        console.log('âœ… APIå·²é…ç½®ï¼ŒæŒ‰é’®çŠ¶æ€å·²æ›´æ–°');
                    } else {
                        // æœªé…ç½®çŠ¶æ€
                        configBtn.innerHTML = '<i class="fas fa-cog"></i> é…ç½®APIå¯†é’¥';
                        configBtn.classList.remove('configured');
                        console.log('âš ï¸ APIæœªé…ç½®ï¼ŒæŒ‰é’®çŠ¶æ€å·²é‡ç½®');
                    }
                }
            }
            
            // åˆ‡æ¢æ¨¡å‹æä¾›å•†ä¿¡æ¯æ˜¾ç¤º
            function switchProviderInfo(provider) {
                // éšè—æ‰€æœ‰æä¾›å•†ä¿¡æ¯
                const allProviderInfos = document.querySelectorAll('.provider-info');
                allProviderInfos.forEach(info => {
                    info.style.display = 'none';
                });
                
                // æ˜¾ç¤ºé€‰ä¸­çš„æä¾›å•†ä¿¡æ¯
                let targetInfo = null;
                switch(provider) {
                    case 'alibaba':
                        targetInfo = document.getElementById('alibabaInfo');
                        break;
                    case 'openai':
                        targetInfo = document.getElementById('openaiInfo');
                        break;
                    case 'anthropic':
                        targetInfo = document.getElementById('anthropicInfo');
                        break;
                }
                
                if (targetInfo) {
                    targetInfo.style.display = 'flex';
                    console.log(`âœ… å·²åˆ‡æ¢åˆ° ${provider} æä¾›å•†ä¿¡æ¯`);
                }
            }
            
            // APIè¿é€šæ€§æµ‹è¯•å‡½æ•°
            async function testApiConnection() {
                const apiKeyInput = document.getElementById('apiKey');
                const apiProviderSelect = document.getElementById('apiProvider');
                const testBtn = document.getElementById('testConnectionBtn');
                
                if (!apiKeyInput || !apiProviderSelect || !testBtn) {
                    console.error('ç¼ºå°‘å¿…è¦çš„è¡¨å•å…ƒç´ ');
                    return;
                }
                
                const apiKey = apiKeyInput.value.trim();
                const provider = apiProviderSelect.value;
                
                if (!apiKey) {
                    alert('è¯·å…ˆè¾“å…¥APIå¯†é’¥');
                    return;
                }
                
                // åŸºæœ¬çš„APIå¯†é’¥æ ¼å¼éªŒè¯
                const validationResult = validateApiKeyFormat(provider, apiKey);
                if (!validationResult.valid) {
                    alert(`âŒ APIå¯†é’¥æ ¼å¼é”™è¯¯ï¼š${validationResult.message}`);
                    return;
                }
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€ä¸ºæµ‹è¯•ä¸­
                testBtn.disabled = true;
                testBtn.className = 'modal-btn modal-btn-test testing';
                testBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> æµ‹è¯•ä¸­...';
                
                try {
                    console.log(`ğŸ”Œ å¼€å§‹æµ‹è¯• ${provider} APIè¿é€šæ€§...`);
                    
                    // æ‰§è¡ŒçœŸå®APIè¿é€šæ€§æµ‹è¯•
                    const testResult = await performApiTest(provider, apiKey);
                    
                    if (testResult.success) {
                        // æµ‹è¯•æˆåŠŸ
                        testBtn.className = 'modal-btn modal-btn-test success';
                        testBtn.innerHTML = '<i class="fas fa-check"></i> è¿é€šæˆåŠŸ';
                        
                        console.log('âœ… APIè¿é€šæ€§æµ‹è¯•æˆåŠŸ');
                    } else {
                        // æµ‹è¯•å¤±è´¥
                        testBtn.className = 'modal-btn modal-btn-test error';
                        testBtn.innerHTML = '<i class="fas fa-times"></i> è¿é€šå¤±è´¥';
                        
                        console.error('âŒ APIè¿é€šæ€§æµ‹è¯•å¤±è´¥:', testResult.error);
                    }
                } catch (error) {
                    // å¼‚å¸¸å¤„ç†
                    testBtn.className = 'modal-btn modal-btn-test error';
                    testBtn.innerHTML = '<i class="fas fa-exclamation-triangle"></i> æµ‹è¯•å¼‚å¸¸';
                    
                    console.error('âŒ APIæµ‹è¯•å¼‚å¸¸:', error);
                }
                
                // 3ç§’åæ¢å¤æŒ‰é’®çŠ¶æ€
                setTimeout(() => {
                    testBtn.disabled = false;
                    testBtn.className = 'modal-btn modal-btn-test';
                    testBtn.innerHTML = '<i class="fas fa-plug"></i> æµ‹è¯•è¿é€šæ€§';
                }, 3000);
            }
            
            // APIå¯†é’¥æ ¼å¼éªŒè¯
            function validateApiKeyFormat(provider, apiKey) {
                switch(provider) {
                    case 'alibaba':
                        // é˜¿é‡Œäº‘DashScope API Keyé€šå¸¸ä»¥sk-å¼€å¤´
                        if (!apiKey.startsWith('sk-') || apiKey.length < 20) {
                            return {
                                valid: false,
                                message: 'é˜¿é‡Œäº‘DashScope APIå¯†é’¥é€šå¸¸ä»¥"sk-"å¼€å¤´ä¸”é•¿åº¦è¾ƒé•¿'
                            };
                        }
                        break;
                        
                    case 'openai':
                        // OpenAI API Keyé€šå¸¸ä»¥sk-å¼€å¤´
                        if (!apiKey.startsWith('sk-') || apiKey.length < 40) {
                            return {
                                valid: false,
                                message: 'OpenAI APIå¯†é’¥é€šå¸¸ä»¥"sk-"å¼€å¤´ä¸”é•¿åº¦è¾ƒé•¿'
                            };
                        }
                        break;
                        
                    case 'anthropic':
                        // Anthropic API Keyé€šå¸¸ä»¥sk-ant-å¼€å¤´
                        if (!apiKey.startsWith('sk-ant-') || apiKey.length < 30) {
                            return {
                                valid: false,
                                message: 'Anthropic APIå¯†é’¥é€šå¸¸ä»¥"sk-ant-"å¼€å¤´ä¸”é•¿åº¦è¾ƒé•¿'
                            };
                        }
                        break;
                }
                
                return { valid: true };
            }
            
            // æ‰§è¡ŒAPIæµ‹è¯•çš„å…·ä½“é€»è¾‘
            async function performApiTest(provider, apiKey) {
                try {
                    let testUrl = '';
                    let testPayload = {};
                    let headers = {};
                    
                    // æ ¹æ®ä¸åŒæä¾›å•†è®¾ç½®æµ‹è¯•å‚æ•°
                    switch(provider) {
                        case 'alibaba':
                            // é˜¿é‡Œäº‘DashScopeæµ‹è¯•
                            testUrl = '/api/test-dashscope';
                            headers = {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${apiKey}`
                            };
                            testPayload = {
                                model: 'qwen-turbo',
                                input: {
                                    messages: [{
                                        role: 'user',
                                        content: 'æµ‹è¯•è¿æ¥'
                                    }]
                                },
                                parameters: {
                                    max_tokens: 10
                                }
                            };
                            break;
                            
                        case 'openai':
                            // OpenAIæµ‹è¯•
                            testUrl = '/api/test-openai';
                            headers = {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${apiKey}`
                            };
                            testPayload = {
                                model: 'gpt-3.5-turbo',
                                messages: [{
                                    role: 'user',
                                    content: 'æµ‹è¯•è¿æ¥'
                                }],
                                max_tokens: 10
                            };
                            break;
                            
                        case 'anthropic':
                            // Anthropic Claudeæµ‹è¯•
                            testUrl = '/api/test-anthropic';
                            headers = {
                                'Content-Type': 'application/json',
                                'x-api-key': apiKey,
                                'anthropic-version': '2023-06-01'
                            };
                            testPayload = {
                                model: 'claude-3-haiku-20240307',
                                max_tokens: 10,
                                messages: [{
                                    role: 'user',
                                    content: 'æµ‹è¯•è¿æ¥'
                                }]
                            };
                            break;
                            
                        default:
                            throw new Error('ä¸æ”¯æŒçš„æ¨¡å‹æä¾›å•†');
                    }
                    
                    console.log(`ğŸ” å¼€å§‹æµ‹è¯• ${getProviderName(provider)} API...`);
                    
                    // å‘é€æµ‹è¯•è¯·æ±‚
                    const response = await fetch(testUrl, {
                        method: 'POST',
                        headers: headers,
                        body: JSON.stringify(testPayload)
                    });
                    
                    const responseData = await response.json();
                    
                    if (response.ok) {
                        return {
                            success: true,
                            message: responseData.message || 'APIè¿æ¥æˆåŠŸï¼Œå¯†é’¥æœ‰æ•ˆ'
                        };
                    } else {
                        return {
                            success: false,
                            error: responseData.error || `HTTP ${response.status}: ${response.statusText}`
                        };
                    }
                    
                } catch (error) {
                    console.error('APIæµ‹è¯•è¯·æ±‚å¤±è´¥:', error);
                    
                    // æ ¹æ®é”™è¯¯ç±»å‹è¿”å›ä¸åŒçš„é”™è¯¯ä¿¡æ¯
                    if (error.name === 'TypeError' && error.message.includes('fetch')) {
                        return {
                            success: false,
                            error: 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®æˆ–æœåŠ¡å™¨çŠ¶æ€'
                        };
                    } else if (error.message.includes('401') || error.message.includes('403')) {
                        return {
                            success: false,
                            error: 'APIå¯†é’¥æ— æ•ˆæˆ–æƒé™ä¸è¶³'
                        };
                    } else {
                        return {
                            success: false,
                            error: error.message || 'æœªçŸ¥é”™è¯¯'
                        };
                    }
                }
            }
            
            // è·å–æä¾›å•†æ˜¾ç¤ºåç§°
            function getProviderName(provider) {
                const names = {
                    'alibaba': 'é˜¿é‡Œäº‘ DashScope',
                    'openai': 'OpenAI',
                    'anthropic': 'Anthropic Claude'
                };
                return names[provider] || provider;
            }
        });
    </script>
    
    <!-- å†…å®¹ç±»å‹é€‰æ‹©æ¨¡æ€æ¡† -->
    <div class="content-modal" id="contentModal">
        <div class="content-modal-overlay" id="contentOverlay"></div>
        <div class="content-modal-content">
            <div class="content-header">
                <h3>
                    <i class="fas fa-list-check"></i>
                    é€‰æ‹©ç”Ÿæˆå†…å®¹
                </h3>
                <button class="content-close" id="contentClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="content-body">
                <div class="content-description">
                    <p>è¯·é€‰æ‹©æ‚¨å¸Œæœ›ç”Ÿæˆçš„å­¦ä¹ èµ„æ–™ç±»å‹ï¼š</p>
                </div>
                <div class="content-options">
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="knowledge" checked>
                        <div class="option-card">
                            <i class="fas fa-lightbulb"></i>
                            <h4>çŸ¥è¯†ç‚¹</h4>
                            <p>æ ¸å¿ƒæŠ€èƒ½å’ŒçŸ¥è¯†ç‚¹æ¸…å•</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="interview" checked>
                        <div class="option-card">
                            <i class="fas fa-question-circle"></i>
                            <h4>é«˜é¢‘é¢è¯•é¢˜</h4>
                            <p>å¸¸è§é¢è¯•é—®é¢˜å’Œå‚è€ƒç­”æ¡ˆ</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="books">
                        <div class="option-card">
                            <i class="fas fa-book"></i>
                            <h4>æ¨èä¹¦ç±</h4>
                            <p>ç›¸å…³é¢†åŸŸä¸“ä¸šä¹¦ç±æ¨è</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="certificates">
                        <div class="option-card">
                            <i class="fas fa-certificate"></i>
                            <h4>è¯ä¹¦</h4>
                            <p>èŒä¸šç›¸å…³è¯ä¹¦å’Œè®¤è¯</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="courses">
                        <div class="option-card">
                            <i class="fas fa-graduation-cap"></i>
                            <h4>æ¨èè¯¾ç¨‹</h4>
                            <p>åœ¨çº¿å­¦ä¹ è¯¾ç¨‹æ¨è</p>
                        </div>
                    </label>
                </div>
            </div>
            <div class="content-footer">
                <button class="content-btn content-btn-cancel" id="contentCancel">å–æ¶ˆ</button>
                <button class="content-btn content-btn-confirm" id="contentConfirm">ç”Ÿæˆå­¦ä¹ è·¯çº¿</button>
            </div>
        </div>
    </div>

    <!-- APIé…ç½®æ¨¡æ€æ¡† -->
    <div class="modal" id="apiConfigModal">
        <div class="modal-overlay"></div>
        <div class="modal-container">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-cog"></i>
                    é…ç½®APIå¯†é’¥
                </h3>
                <button class="modal-close" id="apiConfigClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">è¯·è¾“å…¥æ‚¨çš„APIå¯†é’¥ï¼Œä»¥è·å¾—æ›´å¥½çš„AIåŠŸèƒ½ä½“éªŒã€‚</p>
                
                <div class="input-group">
                    <label for="apiKey">å¤§è¯­è¨€æ¨¡å‹ API å¯†é’¥</label>
                    <div class="key-input-container">
                        <input type="password" id="apiKey" placeholder="è¾“å…¥æ‚¨çš„APIå¯†é’¥..." class="modal-input">
                        <button class="toggle-btn" id="toggleApiKey">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                
                <div class="provider-select">
                    <label for="apiProvider">æ¨¡å‹æä¾›å•†</label>
                    <select id="apiProvider" class="modal-select">
                        <option value="alibaba">é˜¿é‡Œäº‘ - DashScope</option>
                        <option value="openai">OpenAI</option>
                        <option value="anthropic">Anthropic Claude</option>
                    </select>
                </div>
                
                <div class="provider-info alibaba-info" id="alibabaInfo">
                    <div class="provider-logo">
                        <i class="fas fa-cloud" style="font-size: 32px; color: #ff6a00;"></i>
                    </div>
                    <div class="provider-details">
                        <h4>é˜¿é‡Œäº‘ DashScope</h4>
                        <p>ä½¿ç”¨é€šä¹‰å¤§æ¨¡å‹ç³»åˆ—ï¼ŒåŒ…æ‹¬æ¨¡å‹é€šä¹‰åƒé—®2.0ç­‰</p>
                        <a href="https://dashscope.aliyun.com/" target="_blank" class="provider-link">è·å–å¯†é’¥</a>
                    </div>
                </div>
                
                <div class="provider-info openai-info" id="openaiInfo" style="display: none;">
                    <div class="provider-logo">
                        <i class="fas fa-robot" style="font-size: 32px; color: #00a67e;"></i>
                    </div>
                    <div class="provider-details">
                        <h4>OpenAI</h4>
                        <p>ä½¿ç”¨GPT-4ã€GPT-3.5ç­‰å…ˆè¿›çš„è¯­è¨€æ¨¡å‹</p>
                        <a href="https://platform.openai.com/api-keys" target="_blank" class="provider-link">è·å–å¯†é’¥</a>
                    </div>
                </div>
                
                <div class="provider-info anthropic-info" id="anthropicInfo" style="display: none;">
                    <div class="provider-logo">
                        <i class="fas fa-brain" style="font-size: 32px; color: #d4a574;"></i>
                    </div>
                    <div class="provider-details">
                        <h4>Anthropic Claude</h4>
                        <p>ä½¿ç”¨Claude 3.5ã€Claude 3ç­‰é«˜æ€§èƒ½AIæ¨¡å‹</p>
                        <a href="https://console.anthropic.com/" target="_blank" class="provider-link">è·å–å¯†é’¥</a>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn modal-btn-test" id="testConnectionBtn">
                    <i class="fas fa-plug"></i>
                    æµ‹è¯•è¿é€šæ€§
                </button>
                <button class="modal-btn modal-btn-cancel" id="apiConfigCancel">å–æ¶ˆ</button>
                <button class="modal-btn modal-btn-confirm" id="apiConfigConfirm">ä¿å­˜é…ç½®</button>
            </div>
        </div>
    </div>
</body>
</html>