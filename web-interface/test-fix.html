<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•ä¿®å¤åçš„è¯¾ç¨‹æ˜¾ç¤ºåŠŸèƒ½</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-btn {
            background: #4f46e5;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        .test-btn:hover {
            background: #3730a3;
        }
        .results {
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 6px;
            border-left: 4px solid #4f46e5;
        }
        .skills-container {
            margin-top: 20px;
        }
        .skill-category {
            margin-bottom: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        .skill-header {
            background: #f3f4f6;
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        .skill-title {
            margin: 0;
            color: #374151;
            font-size: 16px;
        }
        .skill-content {
            padding: 16px;
        }
        .content-type-body {
            margin-top: 12px;
        }
        .course-item {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            background: #fff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æµ‹è¯•ä¿®å¤åçš„è¯¾ç¨‹æ˜¾ç¤ºåŠŸèƒ½</h1>
        <p>æµ‹è¯•å¤„ç†å®Œæˆäº‹ä»¶çš„æ–°é€»è¾‘</p>
        
        <button class="test-btn" onclick="testCompleteEvent()">æµ‹è¯•å®Œæˆäº‹ä»¶å¤„ç†</button>
        <button class="test-btn" onclick="testCoursesDisplay()">æµ‹è¯•è¯¾ç¨‹æ˜¾ç¤º</button>
        
        <div id="results" class="results" style="display: none;">
            <h3>æµ‹è¯•ç»“æœï¼š</h3>
            <div id="output"></div>
        </div>
        
        <!-- æ¨¡æ‹ŸskillsContainer -->
        <div class="skills-container" id="skillsContainer">
            <!-- è¯¾ç¨‹å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸdisplayStreamCoursesæ–¹æ³•
        function displayStreamCourses(courses) {
            if (!courses || !Array.isArray(courses) || courses.length === 0) {
                console.warn('âš ï¸ è¯¾ç¨‹æ•°æ®ä¸ºç©ºæˆ–æ— æ•ˆ');
                return;
            }
            
            console.log('ğŸ“ æ˜¾ç¤ºçœŸå®æœç´¢çš„è¯¾ç¨‹:', courses);
            
            const addCourseLink = (course) => {
                const baseUrls = {
                    'Coursera': 'https://www.coursera.org/search?query=',
                    'Udemy': 'https://www.udemy.com/courses/search/?q=',
                    'Bç«™': 'https://search.bilibili.com/all?keyword=',
                    'æ…•è¯¾ç½‘': 'https://study.163.com/courses-search/search.htm?keyword=',
                    'è…¾è®¯è¯¾å ‚': 'https://ke.qq.com/course/list?mt=1001&st=2001&tt=-1&tk='
                };
                
                const baseUrl = baseUrls[course.platform] || '#';
                const searchQuery = encodeURIComponent(course.title || 'æœªå‘½åè¯¾ç¨‹');
                return baseUrl === '#' ? '#' : baseUrl + searchQuery;
            };
            
            const translateDifficulty = (difficulty) => {
                const difficultyMap = {
                    'beginner': 'åˆçº§',
                    'intermediate': 'ä¸­çº§', 
                    'advanced': 'é«˜çº§',
                    'expert': 'ä¸“å®¶çº§',
                    'unknown': 'æœªçŸ¥'
                };
                return difficultyMap[difficulty] || 'æœªçŸ¥';
            };
            
            const skillsContainer = document.getElementById('skillsContainer');
            if (!skillsContainer) {
                console.error('âš ï¸ skillsContainerä¸å­˜åœ¨');
                return;
            }
            
            // ç›´æ¥åˆ›å»ºè¯¾ç¨‹åˆ†ç±»æ˜¾ç¤º
            const skillDiv = document.createElement('div');
            skillDiv.className = 'skill-category';
            skillDiv.innerHTML = `
                <div class="skill-header" onclick="this.parentElement.classList.toggle('collapsed')">
                    <h3 class="skill-title">
                        <i class="fas fa-graduation-cap"></i>
                        ğŸ“ æ¨èè¯¾ç¨‹ (å…±${courses.length}é—¨)
                    </h3>
                </div>
                <div class="skill-content">
                    <div class="content-types">
                        <div class="content-type">
                            <div class="content-type-header">
                                <i class="fas fa-graduation-cap"></i>
                                çœŸå®æœç´¢çš„ä¼˜è´¨è¯¾ç¨‹
                            </div>
                            <div class="content-type-body">
                                ${courses.map(course => {
                                    const link = addCourseLink(course);
                                    const rating = course.rating ? parseFloat(course.rating).toFixed(1) : 'N/A';
                                    const students = course.students ? course.students.toLocaleString() : '0';
                                    const difficulty = translateDifficulty(course.difficulty || 'unknown');
                                    const highlights = course.highlights ? course.highlights.join('ã€') : '';
                                    return `
                                        <div class="content-item course-item">
                                            <h4 style="margin: 0 0 0.5rem 0;">
                                                <a href="${link}" target="_blank" style="color: #4f46e5; text-decoration: none; font-weight: bold;">
                                                    ${course.title || 'æœªå‘½åè¯¾ç¨‹'} ğŸ”—
                                                </a>
                                            </h4>
                                            <div style="margin-bottom: 0.5rem; color: #666;">
                                                <span style="display: inline-block; margin-right: 1rem;">ğŸ¢ ${course.platform || 'æœªçŸ¥å¹³å°'}</span>
                                                <span style="display: inline-block; margin-right: 1rem;">â­ ${rating}/5</span>
                                                <span style="display: inline-block; margin-right: 1rem;">ğŸ‘¥ ${students}äºº</span>
                                                <span style="display: inline-block; margin-right: 1rem;">â±ï¸ ${course.duration || 'æœªçŸ¥'}</span>
                                            </div>
                                            <div style="margin-bottom: 0.5rem; color: #666;">
                                                <span style="display: inline-block; margin-right: 1rem;">ğŸ’° ${course.price === 0 ? 'å…è´¹' : 'ï¿¥' + (course.price || 'æœªçŸ¥')}</span>
                                                <span style="display: inline-block; margin-right: 1rem;">ğŸ“Š ${difficulty}</span>
                                                <span style="display: inline-block;">ğŸŒ ${course.language || 'æœªçŸ¥'}</span>
                                            </div>
                                            ${highlights ? `<div style="margin-bottom: 0.5rem;"><span style="color: #059669; font-weight: bold;">ğŸ† äº®ç‚¹ï¼š</span> ${highlights}</div>` : ''}
                                            ${course.description ? `<p style="margin: 0.5rem 0 0 0; color: #444; font-size: 0.9rem;">${course.description}</p>` : ''}
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            skillsContainer.appendChild(skillDiv);
            console.log(`âœ… æˆåŠŸæ˜¾ç¤º ${courses.length} é—¨çœŸå®æœç´¢çš„è¯¾ç¨‹ï¼`);
        }
        
        function testCompleteEvent() {
            const resultsDiv = document.getElementById('results');
            const outputDiv = document.getElementById('output');
            
            resultsDiv.style.display = 'block';
            outputDiv.innerHTML = '<p>ğŸ”„ æ¨¡æ‹Ÿå®Œæˆäº‹ä»¶å¤„ç†...</p>';
            
            // æ¨¡æ‹Ÿcompleteäº‹ä»¶çš„æ•°æ®ï¼ˆåŸºäºä½ æä¾›çš„æ—¥å¿—ï¼‰
            const mockCompleteData = {
                result: {
                    courses: [
                        {
                            platform: "Bç«™",
                            title: "2024æœ€æ–°Pythonå·¥ç¨‹å¸ˆå…¨å¥—æ•™ç¨‹",
                            rating: 4.7,
                            students: 82753,
                            duration: "49å°æ—¶",
                            difficulty: "beginner",
                            price: 0,
                            highlights: ["å®Œå…¨å…è´¹", "ä¸­æ–‡è®²è§£", "å¼¹å¹•äº’åŠ¨"],
                            description: "å…è´¹ä¼˜è´¨çš„Pythonå·¥ç¨‹å¸ˆä¸­æ–‡æ•™ç¨‹ï¼Œé€‚åˆä¸­æ–‡å­¦ä¹ è€…å…¥é—¨å’Œè¿›é˜¶ã€‚",
                            lastUpdated: "2024å¹´",
                            language: "ä¸­æ–‡"
                        },
                        {
                            platform: "Coursera",
                            title: "Pythonå·¥ç¨‹å¸ˆ å®Œæ•´å­¦ä¹ è·¯å¾„",
                            rating: 4.5,
                            students: 48149,
                            duration: "22å°æ—¶",
                            difficulty: "intermediate",
                            price: 373,
                            highlights: ["å¤§å­¦è®¤è¯", "ä¸“ä¸šè¯ä¹¦"],
                            description: "ç”±çŸ¥åå¤§å­¦å’Œè¡Œä¸šä¸“å®¶æä¾›çš„Pythonå·¥ç¨‹å¸ˆä¸“ä¸šè¯¾ç¨‹ï¼ŒåŒ…å«ç†è®ºåŸºç¡€å’Œå®è·µé¡¹ç›®ã€‚",
                            lastUpdated: "2024å¹´",
                            language: "è‹±æ–‡(ä¸­æ–‡å­—å¹•)"
                        },
                        {
                            platform: "æ…•è¯¾ç½‘",
                            title: "Pythonå·¥ç¨‹å¸ˆæ¶æ„å¸ˆè¯¾ç¨‹",
                            rating: 4.7,
                            students: 15148,
                            duration: "38å°æ—¶",
                            difficulty: "intermediate",
                            price: 217,
                            highlights: ["å°±ä¸šæŒ‡å¯¼", "ä¼ä¸šé¡¹ç›®", "å¯¼å¸ˆç­”ç–‘"],
                            description: "é¢å‘å°±ä¸šçš„Pythonå·¥ç¨‹å¸ˆå®æˆ˜è¯¾ç¨‹ï¼ŒåŒ…å«ä¼ä¸šçº§é¡¹ç›®å’Œå°±ä¸šæŒ‡å¯¼ã€‚",
                            lastUpdated: "2024å¹´",
                            language: "ä¸­æ–‡"
                        }
                    ]
                }
            };
            
            // æµ‹è¯•æ–°çš„å¤„ç†é€»è¾‘
            if (mockCompleteData.result && mockCompleteData.result.courses) {
                console.log('ğŸ“ æ˜¾ç¤ºæœ€ç»ˆè¯¾ç¨‹ç»“æœ:', mockCompleteData.result.courses);
                displayStreamCourses(mockCompleteData.result.courses);
                outputDiv.innerHTML = `<p>âœ… æˆåŠŸå¤„ç†å®Œæˆäº‹ä»¶ï¼Œæ˜¾ç¤ºäº† ${mockCompleteData.result.courses.length} é—¨è¯¾ç¨‹</p>`;
            }
        }
        
        function testCoursesDisplay() {
            const resultsDiv = document.getElementById('results');
            const outputDiv = document.getElementById('output');
            
            resultsDiv.style.display = 'block';
            outputDiv.innerHTML = '<p>ğŸ”„ æµ‹è¯•è¯¾ç¨‹æ˜¾ç¤ºåŠŸèƒ½...</p>';
            
            // æ¸…ç©ºå®¹å™¨
            const skillsContainer = document.getElementById('skillsContainer');
            skillsContainer.innerHTML = '';
            
            // ç›´æ¥æµ‹è¯•è¯¾ç¨‹æ˜¾ç¤º
            const testCourses = [
                {
                    platform: "Udemy",
                    title: "å®æˆ˜Pythonå·¥ç¨‹å¸ˆé¡¹ç›®å¼€å‘",
                    rating: 4.4,
                    students: 13801,
                    duration: "15å°æ—¶",
                    difficulty: "beginner",
                    price: 210,
                    highlights: ["ç»ˆèº«è®¿é—®", "å®æˆ˜é¡¹ç›®", "ä»£ç ä¸‹è½½"],
                    description: "å®æˆ˜å¯¼å‘çš„Pythonå·¥ç¨‹å¸ˆè¯¾ç¨‹ï¼Œé€šè¿‡é¡¹ç›®å®è·µå¿«é€ŸæŒæ¡æ ¸å¿ƒæŠ€èƒ½ã€‚",
                    language: "è‹±æ–‡(ä¸­æ–‡å­—å¹•)"
                }
            ];
            
            displayStreamCourses(testCourses);
            outputDiv.innerHTML = '<p>âœ… è¯¾ç¨‹æ˜¾ç¤ºåŠŸèƒ½æµ‹è¯•å®Œæˆ</p>';
        }
    </script>
</body>
</html>