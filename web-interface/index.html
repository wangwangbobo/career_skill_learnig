<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒé€”åŠ©æ‰‹AIæ±‚èŒå¤§å¸ˆ - ä¸“ä¸šæ±‚èŒå­¦ä¹ åŠ©æ‰‹</title>
    
    <!-- ä¼˜å…ˆåŠ è½½å…³é”®CSSï¼Œé¿å…ç™½å± -->  
    <link rel="stylesheet" href="styles.css">
    
    <!-- å†…è”å…³é”®æ ·å¼ï¼Œç«‹å³æ˜¾ç¤ºå†…å®¹ -->
    <style>
        /* ç«‹å³æ˜¾ç¤ºé¡µé¢ï¼Œé¿å…ç™½å± */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            opacity: 1 !important; /* å¼ºåˆ¶æ˜¾ç¤º */
        }
        
        /* åŠ è½½æŒ‡ç¤ºå™¨çš„ç®€å•æ ·å¼ */
        .simple-loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            font-weight: 600;
            z-index: 9999;
        }
        
        .simple-loading.hidden {
            display: none;
        }
        
        /* ç®€å•çš„æ—‹è½¬åŠ¨ç”» */
        .simple-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
    
    <!-- å¼‚æ­¥åŠ è½½å¤–éƒ¨å­—ä½“ï¼Œä¸é˜»å¡æ¸²æŸ“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'; this.onload=null;">
    
    <!-- å¼‚æ­¥åŠ è½½å­—ä½“å›¾æ ‡ï¼Œæä¾›é™çº§æ–¹æ¡ˆ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'; this.onload=null;">
    
    <!-- å¼‚æ­¥åŠ è½½ Markmap ç›¸å…³åº“ï¼Œç¡®ä¿æ­£ç¡®åˆå§‹åŒ– -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7" async></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view" async></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib" async></script>
    
    <!-- å¿«é€Ÿåˆå§‹åŒ–è„šæœ¬ - æ€§èƒ½ä¼˜åŒ– -->
    <script src="fast-init.js"></script>
    <!-- é™çº§CSSï¼šå½“å¤–éƒ¨èµ„æºåŠ è½½å¤±è´¥æ—¶çš„å¤‡ç”¨æ ·å¼ -->
    <style>
        /* å­—ä½“é™çº§ï¼šå¦‚æœInterå­—ä½“æ²¡åŠ è½½æˆåŠŸï¼Œä½¿ç”¨ç³»ç»Ÿå­—ä½“ */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
        }
        
        /* å›¾æ ‡é™çº§ï¼šå¦‚æœFontAwesomeæ²¡åŠ è½½æˆåŠŸï¼Œæ˜¾ç¤ºæ–‡æœ¬ */
        .icon-fallback {
            display: none;
        }
        
        /* å½“FontAwesomeæ²¡åŠ è½½æ—¶æ˜¾ç¤ºæ–‡æœ¬ */
        .fas:not([class*="fa-"]):before {
            content: "[å›¾æ ‡]";
            font-family: Arial, sans-serif;
        }
        
        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            color: #4f46e5;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .loading-indicator.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- ç®€å•åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div class="simple-loading" id="simpleLoading">
        <div class="simple-spinner"></div>
        æ­£åœ¨åŠ è½½èŒé€”åŠ©æ‰‹...
    </div>

    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-graduation-cap"></i>
                <span>èŒé€”åŠ©æ‰‹</span>
            </div>
            <div class="nav-menu">
                <a href="#home" class="nav-link active">é¦–é¡µ</a>
                <a href="#features" class="nav-link">åŠŸèƒ½</a>
                <a href="#about" class="nav-link">å…³äº</a>
                <button class="config-btn" id="configBtn">
                    <i class="fas fa-cog"></i>
                    <span>é…ç½®API</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- å·¦ä¾§å†…å®¹åŒºåŸŸ -->
        <div class="content-area">
            <!-- æ¬¢è¿åŒºåŸŸ -->
            <section class="hero-section" id="home">
                <div class="hero-content">
                    <div class="robot-avatar">
                        ğŸ¤–
                    </div>
                    <h1 class="hero-title">èŒé€”åŠ©æ‰‹</h1>
                    <h2 class="hero-subtitle">Hi åŒå­¦ï¼</h2>
                    <p class="hero-description">æ ¹æ®èŒä½æè¿°ä¸ºä½ åˆ¶å®šä¸“å±å­¦ä¹ è·¯çº¿ï¼Œæä¾›ä»å²—ä½åˆ†æåˆ°é¢è¯•å‡†å¤‡çš„å…¨æ–¹ä½æ”¯æŒï¼Œè½»æ¾æ‹¿ä¸‹offer~</p>
                </div>
            </section>

            <!-- èŒä½è¾“å…¥åŒºåŸŸ -->
            <section class="job-input-section">
                <div class="input-card">
                    <div class="input-tabs">
                        <button class="tab-btn active" id="jobNameTab" data-tab="jobName">
                            <i class="fas fa-briefcase"></i>
                            è¾“å…¥å²—ä½åç§°
                        </button>
                        <button class="tab-btn" id="jobDescTab" data-tab="jobDesc">
                            <i class="fas fa-file-alt"></i>
                            ä¸Šä¼ èŒä½æè¿°
                        </button>
                    </div>
                    
                    <!-- å²—ä½åç§°è¾“å…¥ -->
                    <div class="tab-content active" id="jobNameContent">
                        <div class="input-group">
                            <label for="jobTitle">èŒä½åç§°ï¼š</label>
                            <input 
                                type="text" 
                                id="jobTitle" 
                                placeholder="è¯·å¡«å†™èŒä½ä¿¡æ¯ï¼ˆå¦‚AIå·¥ç¨‹å¸ˆï¼‰" 
                                class="job-input"
                            >
                        </div>
                        <div class="quick-jobs">
                            <span class="quick-label">çƒ­é—¨èŒä½ï¼š</span>
                            <button class="job-tag" data-job="å‰ç«¯å·¥ç¨‹å¸ˆ">å‰ç«¯å·¥ç¨‹å¸ˆ</button>
                            <button class="job-tag" data-job="åç«¯å·¥ç¨‹å¸ˆ">åç«¯å·¥ç¨‹å¸ˆ</button>
                            <button class="job-tag" data-job="AIå·¥ç¨‹å¸ˆ">AIå·¥ç¨‹å¸ˆ</button>
                            <button class="job-tag" data-job="äº§å“ç»ç†">äº§å“ç»ç†</button>
                            <button class="job-tag" data-job="æ•°æ®åˆ†æå¸ˆ">æ•°æ®åˆ†æå¸ˆ</button>
                        </div>
                    </div>
                    
                    <!-- èŒä½æè¿°ä¸Šä¼  -->
                    <div class="tab-content" id="jobDescContent">
                        <div class="input-group">
                            <label for="jobDescription">èŒä½æè¿°ï¼š</label>
                            <textarea 
                                id="jobDescription" 
                                placeholder="è¯·å¡«å†™èŒä½æè¿°ä¿¡æ¯" 
                                class="job-textarea"
                                rows="6"
                            ></textarea>
                        </div>
                        <div class="upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>ç‚¹å‡»ä¸Šä¼ èŒä½æè¿°å›¾ç‰‡æˆ–æ‹–æ‹½åˆ°æ­¤å¤„</p>
                            <input type="file" id="fileInput" accept="image/*" style="display: none;">
                            <button class="upload-btn" id="uploadBtn">
                                <i class="fas fa-image"></i>
                                é€‰æ‹©å›¾ç‰‡
                            </button>
                        </div>
                    </div>
                    
                    <button id="generateBtn" class="generate-btn" disabled>
                        <i class="fas fa-book"></i>
                        ç”Ÿæˆå­¦ä¹ è·¯çº¿
                    </button>
                    
                    <!-- è°ƒè¯•ä¿¡æ¯ -->
                    <div style="margin-top: 1rem; padding: 1rem; background: #f0f9ff; border-radius: 8px; font-size: 0.9rem; color: #0369a1;">
                        <strong>ğŸ”§ è°ƒè¯•ä¿¡æ¯ï¼š</strong><br>
                        â€¢ æŒ‰é’®æ–‡æ¡ˆåº”æ˜¾ç¤ºä¸º"ç”Ÿæˆå­¦ä¹ è·¯çº¿"<br>
                        â€¢ è¾“å…¥èŒä½ä¿¡æ¯åæŒ‰é’®å°†å˜ä¸ºå¯ç‚¹å‡»çŠ¶æ€<br>
                        â€¢ ç‚¹å‡»æŒ‰é’®å°†æ‰“å¼€å†…å®¹é€‰æ‹©å¼¹çª—
                    </div>
                </div>
            </section>

        <!-- åŠ è½½çŠ¶æ€ -->
        <section class="loading-section" id="loadingSection" style="display: none;">
            <div class="loading-card">
                <div class="loading-content">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                    <h3 class="loading-title">AIæ­£åœ¨ä¸ºæ‚¨åˆ†æèŒä½å’Œç”Ÿæˆå­¦ä¹ èµ„æ–™...</h3>
                    
                    <!-- è¿›åº¦æ¡ -->
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">0%</div>
                    <div class="loading-steps">
                        <div class="step active" id="step1">
                            <i class="fas fa-search"></i>
                            <span>åˆ†æèŒä½æŠ€èƒ½</span>
                        </div>
                        <div class="step" id="step2">
                            <i class="fas fa-lightbulb"></i>
                            <span>ç”ŸæˆçŸ¥è¯†ç‚¹</span>
                        </div>
                        <div class="step" id="step3">
                            <i class="fas fa-question-circle"></i>
                            <span>ç”Ÿæˆé¢è¯•é¢˜</span>
                        </div>
                        <div class="step" id="step4">
                            <i class="fas fa-book"></i>
                            <span>æ¨èä¹¦ç±</span>
                        </div>
                        <div class="step" id="step5">
                            <i class="fas fa-certificate"></i>
                            <span>æ¨èè¯ä¹¦</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->
        <section class="results-section" id="resultsSection" style="display: none;">
            <div class="results-header">
                <h2 class="results-title">
                    <i class="fas fa-briefcase"></i>
                    èŒä½å­¦ä¹ èµ„æ–™
                </h2>
                <div class="results-meta">
                    <span class="topic-display" id="topicDisplay"></span>
                    <span class="generation-time" id="generationTime"></span>
                </div>
                <div class="results-actions">
                    <button class="result-action-btn" id="saveBtn">
                        <i class="fas fa-save"></i>
                        ä¿å­˜
                    </button>
                    <button class="result-action-btn" id="exportBtn">
                        <i class="fas fa-file-pdf"></i>
                        å¯¼å‡ºPDF
                    </button>
                    <button class="result-action-btn" id="exportFeishuBtn">
                        <i class="fas fa-file-alt"></i>
                        å¯¼å‡ºé£ä¹¦æ–‡æ¡£
                    </button>
                </div>
            </div>

            <!-- æ€ç»´å¯¼å›¾ -->
            <div class="result-card" id="mindmapCard">
                <div class="card-header">
                    <h3><i class="fas fa-project-diagram"></i> æ€ç»´å¯¼å›¾</h3>
                    <span class="card-status" id="mindmapStatus">ç­‰å¾…ä¸­</span>
                    <div class="mindmap-controls">
                        <button class="mindmap-btn" id="expandAll" title="å±•å¼€å…¨éƒ¨">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </button>
                        <button class="mindmap-btn" id="collapseAll" title="æŠ˜å å…¨éƒ¨">
                            <i class="fas fa-compress-arrows-alt"></i>
                        </button>
                        <button class="mindmap-btn" id="downloadMindmap" title="ä¸‹è½½æ€ç»´å¯¼å›¾">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                <div class="card-content" id="mindmapContent">
                    <!-- æ€ç»´å¯¼å›¾å†…å®¹å°†åŠ¨æ€åŠ è½½ -->
                </div>
            </div>

            <!-- æŠ€èƒ½åˆ†ç±»å±•ç¤º -->
            <div class="skills-container" id="skillsContainer">
                <!-- æŠ€èƒ½åˆ†ç±»å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- é‡æ–°ç”ŸæˆæŒ‰é’® -->
            <div class="regenerate-section">
                <button class="regenerate-btn" id="regenerateBtn">
                    <i class="fas fa-redo"></i>
                    é‡æ–°ç”Ÿæˆ
                </button>
            </div>
        </section>

        <!-- é”™è¯¯æç¤º -->
        <section class="error-section" id="errorSection" style="display: none;">
            <div class="error-card">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3 class="error-title">ç”Ÿæˆå¤±è´¥</h3>
                <p class="error-message" id="errorMessage"></p>
                <button class="retry-btn" id="retryBtn">
                    <i class="fas fa-redo"></i>
                    é‡è¯•
                </button>
            </div>
        </section>
        </div> <!-- ç»“æŸå·¦ä¾§å†…å®¹åŒºåŸŸ -->
        
        <!-- å³ä¾§æ—¥å¿—é¢æ¿ -->
        <div class="log-panel" id="logPanel">
            <div class="log-header">
                <h3>
                    <i class="fas fa-terminal"></i>
                    AI å®æ—¶æ—¥å¿—
                </h3>
                <div class="log-controls">
                    <button class="log-btn" id="clearLogsBtn" title="æ¸…ç©ºæ—¥å¿—">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="log-btn" id="downloadLogsBtn" title="ä¸‹è½½æ—¥å¿—">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="log-btn" id="toggleLogPanelBtn" title="éšè—/æ˜¾ç¤ºæ—¥å¿—">
                        <i class="fas fa-eye-slash"></i>
                    </button>
                </div>
            </div>
            <div class="log-content" id="logContent">
                <div class="log-welcome">
                    <i class="fas fa-info-circle"></i>
                    æ¬¢è¿ä½¿ç”¨èŒé€”åŠ©æ‰‹ï¼è¯·è¾“å…¥èŒä½ä¿¡æ¯å¼€å§‹ç”Ÿæˆ...
                </div>
            </div>
            <div class="log-status">
                <span class="log-count">0 æ¡æ—¥å¿—</span>
                <span class="log-auto-scroll">
                    <input type="checkbox" id="autoScrollLog" checked>
                    <label for="autoScrollLog">è‡ªåŠ¨æ»šåŠ¨</label>
                </span>
            </div>
        </div>
        
        <!-- AIå¯¹è¯æ¡† -->
        <div class="chat-panel" id="chatPanel">
            <div class="chat-header">
                <h3>
                    <i class="fas fa-robot"></i>
                    AI æ™ºèƒ½åŠ©æ‰‹
                </h3>
                <div class="chat-controls">
                    <button class="chat-btn" id="clearChatBtn" title="æ¸…ç©ºå¯¹è¯">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="chat-btn" id="downloadChatBtn" title="ä¸‹è½½å¯¹è¯">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="chat-btn" id="toggleChatPanelBtn" title="éšè—/æ˜¾ç¤ºå¯¹è¯">
                        <i class="fas fa-eye-slash"></i>
                    </button>
                </div>
            </div>
            <div class="chat-content" id="chatContent">
                <div class="chat-welcome">
                    <i class="fas fa-robot"></i>
                    <p>ä½ å¥½ï¼æˆ‘æ˜¯èŒé€”åŠ©æ‰‹AIï¼Œå¯ä»¥å›ç­”ä½ å…³äºèŒä¸šå‘å±•ã€æŠ€èƒ½å­¦ä¹ çš„é—®é¢˜ã€‚</p>
                    <p>è¯·è¾“å…¥ä½ çš„é—®é¢˜å¼€å§‹å¯¹è¯å§ï¼</p>
                </div>
            </div>
            <div class="chat-input-area">
                <div class="chat-input-wrapper">
                    <textarea 
                        id="chatInput" 
                        placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜..."
                        rows="2"
                        maxlength="2000"
                    ></textarea>
                    <button class="chat-send-btn" id="chatSendBtn" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="chat-status">
                    <span class="chat-count" id="chatCount">0 æ¡å¯¹è¯</span>
                    <span class="chat-model">AI æ¨¡å‹: ç™¾ç‚¼</span>
                </div>
            </div>
        </div>
    </div> <!-- ç»“æŸä¸»å®¹å™¨ -->

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 èŒé€”åŠ©æ‰‹AIæ±‚èŒå¤§å¸ˆ - åŸºäºEkoæ¡†æ¶æ„å»º | å‚åŠ "Awaken Your Web åˆ›æ–°æŒ‘æˆ˜èµ›"</p>
            <div class="footer-links">
                <a href="#" class="footer-link">GitHub</a>
                <a href="#" class="footer-link">æ–‡æ¡£</a>
                <a href="#" class="footer-link">åé¦ˆ</a>
            </div>
        </div>
    </footer>

    <!-- Toast é€šçŸ¥ -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
    </div>

    <!-- APIå¯†é’¥é…ç½®å¼¹çª— -->
    <div class="config-modal" id="configModal">
        <div class="config-modal-overlay" id="configOverlay"></div>
        <div class="config-modal-content">
            <div class="config-header">
                <h3>
                    <i class="fas fa-key"></i>
                    é…ç½®APIå¯†é’¥
                </h3>
                <button class="config-close" id="configClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="config-body">
                <div class="config-description">
                    <p>ä¸ºäº†ä½¿ç”¨çœŸå®AIåŠŸèƒ½ç”Ÿæˆå­¦ä¹ å†…å®¹ï¼Œè¯·é…ç½®é˜¿é‡Œäº‘ç™¾ç‚¼APIå¯†é’¥ï¼š</p>
                </div>
                <div class="config-form">
                    <div class="config-input-group">
                        <label for="apiKeyInput">é˜¿é‡Œäº‘ç™¾ç‚¼APIå¯†é’¥ï¼š</label>
                        <div class="config-input-wrapper">
                            <input 
                                type="password" 
                                id="apiKeyInput" 
                                placeholder="è¯·è¾“å…¥ä½ çš„APIå¯†é’¥" 
                                class="config-input"
                            >
                            <button class="toggle-password" id="togglePassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="config-help">
                        <div class="config-help-item">
                            <strong>1. è·å–APIå¯†é’¥ï¼š</strong>
                            <a href="https://dashscope.console.aliyun.com/" target="_blank" class="config-link">
                                è®¿é—®é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°
                                <i class="fas fa-external-link-alt"></i>
                            </a>
                        </div>
                        <div class="config-help-item">
                            <strong>2. ç™»å½•é˜¿é‡Œäº‘è´¦å·</strong>å¹¶åˆ›å»ºAPIå¯†é’¥
                        </div>
                        <div class="config-help-item">
                            <strong>3. å¤åˆ¶å¯†é’¥</strong>å¹¶ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†
                        </div>
                    </div>
                    <div class="config-status" id="configStatus">
                        <!-- çŠ¶æ€ä¿¡æ¯å°†åŠ¨æ€æ˜¾ç¤º -->
                    </div>
                </div>
            </div>
            <div class="config-footer">
                <button class="config-btn config-btn-cancel" id="configCancel">å–æ¶ˆ</button>
                <button class="config-btn config-btn-test" id="configTest">æµ‹è¯•è¿æ¥</button>
                <button class="config-btn config-btn-save" id="configSave">ä¿å­˜é…ç½®</button>
            </div>
        </div>
    </div>

    <!-- å†…å®¹ç±»å‹é€‰æ‹©æ¨¡æ€æ¡† -->
    <div class="content-modal" id="contentModal">
        <div class="content-modal-overlay" id="contentOverlay"></div>
        <div class="content-modal-content">
            <div class="content-header">
                <h3>
                    <i class="fas fa-list-check"></i>
                    é€‰æ‹©ç”Ÿæˆå†…å®¹
                </h3>
                <button class="content-close" id="contentClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="content-body">
                <div class="content-description">
                    <p>è¯·é€‰æ‹©æ‚¨å¸Œæœ›ç”Ÿæˆçš„å­¦ä¹ èµ„æ–™ç±»å‹ï¼š</p>
                </div>
                <div class="content-options">
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="knowledge" checked>
                        <div class="option-card">
                            <i class="fas fa-lightbulb"></i>
                            <h4>çŸ¥è¯†ç‚¹</h4>
                            <p>æ ¸å¿ƒæŠ€èƒ½å’ŒçŸ¥è¯†ç‚¹æ¸…å•</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="interview" checked>
                        <div class="option-card">
                            <i class="fas fa-question-circle"></i>
                            <h4>é«˜é¢‘é¢è¯•é¢˜</h4>
                            <p>å¸¸è§é¢è¯•é—®é¢˜å’Œå‚è€ƒç­”æ¡ˆ</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="books">
                        <div class="option-card">
                            <i class="fas fa-book"></i>
                            <h4>æ¨èä¹¦ç±</h4>
                            <p>ç›¸å…³é¢†åŸŸä¸“ä¸šä¹¦ç±æ¨è</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="certificates">
                        <div class="option-card">
                            <i class="fas fa-certificate"></i>
                            <h4>è¯ä¹¦</h4>
                            <p>èŒä¸šç›¸å…³è¯ä¹¦å’Œè®¤è¯</p>
                        </div>
                    </label>
                    <label class="content-option">
                        <input type="checkbox" name="contentType" value="courses">
                        <div class="option-card">
                            <i class="fas fa-graduation-cap"></i>
                            <h4>æ¨èè¯¾ç¨‹</h4>
                            <p>åœ¨çº¿å­¦ä¹ è¯¾ç¨‹æ¨è</p>
                        </div>
                    </label>
                </div>
            </div>
            <div class="content-footer">
                <button class="content-btn content-btn-cancel" id="contentCancel">å–æ¶ˆ</button>
                <button class="content-btn content-btn-confirm" id="contentConfirm">ç”Ÿæˆå­¦ä¹ è·¯çº¿</button>
            </div>
        </div>
    </div>

    <!-- ç®€åŒ–çš„JavaScriptåˆå§‹åŒ– -->
    <script>
        // ç«‹å³éšè—åŠ è½½æŒ‡ç¤ºå™¨ï¼Œæ˜¾ç¤ºé¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            const simpleLoading = document.getElementById('simpleLoading');
            if (simpleLoading) {
                simpleLoading.classList.add('hidden');
            }
            console.log('âœ“ é¡µé¢åŠ è½½å®Œæˆ');
            
            // ç«‹å³ä¿®å¤æŒ‰é’®çŠ¶æ€çš„å¤‡ç”¨è„šæœ¬
            setTimeout(function() {
                const jobTitle = document.getElementById('jobTitle');
                const generateBtn = document.getElementById('generateBtn');
                
                if (jobTitle && generateBtn) {
                    console.log('ğŸ”§ å¤‡ç”¨ä¿®å¤è„šæœ¬å¯åŠ¨...');
                    
                    function updateButtonState() {
                        const hasValue = jobTitle.value.trim().length > 0;
                        generateBtn.disabled = !hasValue;
                        generateBtn.style.opacity = hasValue ? '1' : '0.6';
                        generateBtn.style.cursor = hasValue ? 'pointer' : 'not-allowed';
                        generateBtn.style.pointerEvents = 'auto';
                        
                        console.log('ğŸ”„ æŒ‰é’®çŠ¶æ€æ›´æ–°:', {
                            hasValue,
                            disabled: generateBtn.disabled,
                            value: jobTitle.value
                        });
                    }
                    
                    // ç«‹å³æ›´æ–°
                    updateButtonState();
                    
                    // ç›‘å¬è¾“å…¥å˜åŒ–
                    jobTitle.addEventListener('input', updateButtonState);
                    
                    // ç›‘å¬çƒ­é—¨æŒ‰é’®ç‚¹å‡»
                    document.querySelectorAll('.job-tag').forEach(function(tag) {
                        tag.addEventListener('click', function() {
                            const job = this.getAttribute('data-job');
                            if (job) {
                                jobTitle.value = job;
                                updateButtonState();
                                console.log('ğŸ† çƒ­é—¨èŒä½é€‰ä¸­:', job);
                            }
                        });
                    });
                    
                    console.log('âœ… å¤‡ç”¨ä¿®å¤è„šæœ¬å·²åˆå§‹åŒ–');
                }
            }, 50);
        });
        
        // å¦‚æœ3ç§’å†…æ²¡åŠ è½½å®Œæˆï¼Œå¼ºåˆ¶æ˜¾ç¤ºé¡µé¢
        setTimeout(function() {
            const simpleLoading = document.getElementById('simpleLoading');
            if (simpleLoading) {
                simpleLoading.classList.add('hidden');
            }
        }, 3000);
    </script>
    
    <!-- ä¸»è¦çš„JavaScriptæ–‡ä»¶ - åŒæ­¥åŠ è½½ç¡®ä¿æ­£ç¡®åˆå§‹åŒ– -->
    <script src="app.js"></script>
    
    <!-- ç®€åŒ–çš„åˆå§‹åŒ–è„šæœ¬ - è§£å†³åˆå§‹åŒ–é—®é¢˜ -->
    <script src="simple-init.js"></script>
    
    <!-- èŒé€”åŠ©æ‰‹è¡¥å……æ–¹æ³• -->
    <script>
        // ç®€å•çš„åˆå§‹åŒ–æ£€æŸ¥
        function addJobAssistantMethods() {
            // ç­‰å¾…ä¸»ç±»åŠ è½½å®Œæˆ
            if (window.jobAssistantUI) {
                const ui = window.jobAssistantUI;
                console.log('âœ… æ‰¾åˆ° jobAssistantUIï¼Œæ·»åŠ è¡¥å……æ–¹æ³•...');
                
                // æ·»åŠ switchTabæ–¹æ³•
                ui.switchTab = function(tabName) {
                    if (!this.jobNameTab || !this.jobDescTab) return;
                    
                    this.jobNameTab.classList.remove('active');
                    this.jobDescTab.classList.remove('active');
                    this.jobNameContent.classList.remove('active');
                    this.jobDescContent.classList.remove('active');
                    
                    if (tabName === 'jobName') {
                        this.jobNameTab.classList.add('active');
                        this.jobNameContent.classList.add('active');
                    } else {
                        this.jobDescTab.classList.add('active');
                        this.jobDescContent.classList.add('active');
                    }
                    
                    this.updateGenerateButton && this.updateGenerateButton();
                };
                
                // æ·»åŠ updateGenerateButtonæ–¹æ³•
                ui.updateGenerateButton = function() {
                    const hasJobTitle = this.jobTitle && this.jobTitle.value.trim().length > 0;
                    const hasJobDesc = this.jobDescription && this.jobDescription.value.trim().length > 0;
                    const hasUploadedFile = this.fileInput && this.fileInput.files.length > 0;
                    
                    const isJobNameTabActive = this.jobNameContent && this.jobNameContent.classList.contains('active');
                    const isValid = isJobNameTabActive ? hasJobTitle : (hasJobDesc || hasUploadedFile);
                    
                    if (this.generateBtn) {
                        this.generateBtn.disabled = !isValid;
                        this.generateBtn.style.opacity = isValid ? '1' : '0.6';
                    }
                };
                
                // æ·»åŠ showContentModalæ–¹æ³•
                ui.showContentModal = function() {
                    if (this.contentModal) {
                        this.contentModal.classList.add('show');
                        this.updateContentConfirmButton && this.updateContentConfirmButton();
                    }
                };
                
                // æ·»åŠ hideContentModalæ–¹æ³•
                ui.hideContentModal = function() {
                    if (this.contentModal) {
                        this.contentModal.classList.remove('show');
                    }
                };
                
                // æ·»åŠ updateContentConfirmButtonæ–¹æ³•
                ui.updateContentConfirmButton = function() {
                    if (this.contentOptions && this.contentConfirm) {
                        const checkedOptions = Array.from(this.contentOptions).filter(cb => cb.checked);
                        this.contentConfirm.disabled = checkedOptions.length === 0;
                    }
                };
                
                // æ·»åŠ startGenerationæ–¹æ³•ï¼ˆæ ¸å¿ƒæ–¹æ³•ï¼‰
                ui.startGeneration = async function() {
                    try {
                        console.log('ğŸš€ å¼€å§‹ç”Ÿæˆå­¦ä¹ èµ„æ–™');
                        
                        // è·å–é€‰ä¸­çš„å†…å®¹ç±»å‹
                        this.selectedContentTypes = [];
                        if (this.contentOptions) {
                            this.selectedContentTypes = Array.from(this.contentOptions)
                                .filter(cb => cb.checked)
                                .map(cb => cb.value);
                        }
                        
                        // è·å–èŒä½ä¿¡æ¯
                        const isJobNameTabActive = this.jobNameContent && this.jobNameContent.classList.contains('active');
                        if (isJobNameTabActive && this.jobTitle) {
                            this.currentJobInfo = {
                                type: 'jobName',
                                content: this.jobTitle.value.trim()
                            };
                        } else if (this.jobDescription) {
                            this.currentJobInfo = {
                                type: 'jobDescription',
                                content: this.jobDescription.value.trim(),
                                file: this.fileInput && this.fileInput.files[0] || null
                            };
                        }
                        
                        this.hideContentModal();
                        
                        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                        if (this.loadingSection) {
                            this.loadingSection.style.display = 'block';
                        }
                        
                        this.addLog && this.addLog('info', `ğŸ’¼ å¼€å§‹åˆ†æèŒä½: ${this.currentJobInfo.content}`);
                        this.addLog && this.addLog('info', `ğŸ¯ é€‰ä¸­å†…å®¹ç±»å‹: ${this.selectedContentTypes.join(', ')}`);
                        
                        // è°ƒç”¨çœŸå®APIç”Ÿæˆå­¦ä¹ èµ„æ–™
                        await this.callRealAPI();
                        
                    } catch (error) {
                        console.error('ç”Ÿæˆå¤±è´¥:', error);
                        this.showToast && this.showToast('ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
                    }
                };
                
                // æ·»åŠ çœŸå®APIè°ƒç”¨æ–¹æ³•
                ui.callRealAPI = async function() {
                    try {
                        console.log('ğŸ¤– è°ƒç”¨çœŸå®AIåç«¯API...');
                        this.addLog && this.addLog('info', 'ğŸ¤– æ­£åœ¨è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆå†…å®¹...');
                        
                        // æ£€æŸ¥æ˜¯å¦æœ‰APIå¯†é’¥
                        const apiKey = this.getStoredApiKey ? this.getStoredApiKey() : null;
                        
                        if (!apiKey) {
                            this.addLog && this.addLog('warning', 'âš ï¸ æœªé…ç½®APIå¯†é’¥ï¼Œå°†ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æ¨¡å¼');
                            this.showToast && this.showToast('âš ï¸ æœªé…ç½®APIå¯†é’¥ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ã€‚ç‚¹å‡»å³ä¸Šè§’é…ç½®APIå¯†é’¥ä»¥è·å–çœŸå®AIåŠŸèƒ½ã€‚', 'info', 5000);
                        }
                        
                        // è°ƒç”¨åç«¯API
                        const response = await fetch('/api/generate-learning-plan', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({ 
                                topic: this.currentJobInfo.content,
                                apiKey: apiKey // ä¼ é€’APIå¯†é’¥
                            })
                        });
                        
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                        }
                        
                        const result = await response.json();
                        console.log('âœ… åç«¯APIè°ƒç”¨æˆåŠŸ:', result);
                        
                        // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°è¿‡ç¨‹
                        await this.simulateGeneration();
                        
                        // è§£æå’Œå±•ç¤ºç»“æœ
                        this.processAPIResult(result);
                        
                    } catch (error) {
                        console.error('â“ APIè°ƒç”¨å¤±è´¥:', error);
                        this.addLog && this.addLog('error', `âŒ APIè°ƒç”¨å¤±è´¥: ${error.message}`);
                        
                        // å¦‚æœæ˜¯APIå¯†é’¥é—®é¢˜ï¼Œæç¤ºç”¨æˆ·é…ç½®
                        if (error.message.includes('APIå¯†é’¥') || error.message.includes('æœªé…ç½®')) {
                            this.showToast && this.showToast('éœ€è¦é…ç½®APIå¯†é’¥æ‰èƒ½ä½¿ç”¨çœŸå®AIåŠŸèƒ½ï¼Œç°åœ¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®', 'warning', 5000);
                            // åœ¨APIå¤±è´¥æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
                            await this.simulateGeneration();
                            this.generateMockData();
                        } else {
                            // å…¶ä»–é”™è¯¯ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                            this.showError && this.showError(error.message);
                        }
                    }
                };
                
                // æ·»åŠ å¤„ç†APIç»“æœçš„æ–¹æ³•
                ui.processAPIResult = function(result) {
                    if (!result) {
                        console.warn('âš ï¸ APIè¿”å›ç»“æœä¸ºç©º');
                        this.generateMockData(); // é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
                        return;
                    }
                    
                    console.log('ğŸ” å¤„ç†APIè¿”å›ç»“æœ:', result);
                    this.addLog && this.addLog('info', 'âœ… å¤§æ¨¡å‹ç”Ÿæˆå®Œæˆï¼Œæ­£åœ¨å¤„ç†ç»“æœ...');
                    
                    try {
                        // æ¸…ç©ºæŠ€èƒ½å®¹å™¨
                        if (this.skillsContainer) {
                            this.skillsContainer.innerHTML = '';
                        }
                        
                        // æ ¹æ®APIè¿”å›çš„æ•°æ®ç”ŸæˆæŠ€èƒ½åˆ†ç±»
                        this.generateSkillsFromAPI(result);
                        
                        // å¤„ç†æ€ç»´å¯¼å›¾
                        this.processMindmapFromAPI(result);
                        
                        this.addLog && this.addLog('info', 'ğŸ‰ çœŸå®AIå­¦ä¹ èµ„æ–™ç”Ÿæˆå®Œæˆï¼');
                        
                    } catch (error) {
                        console.error('å¤„ç†APIç»“æœå¤±è´¥:', error);
                        // é™çº§åˆ°æ¨¡æ‹Ÿæ•°æ®
                        this.generateMockData();
                    }
                };
                
                // æ·»åŠ æ ¹æ®APIç”ŸæˆæŠ€èƒ½åˆ†ç±»çš„æ–¹æ³•
                ui.generateSkillsFromAPI = function(apiResult) {
                    if (!this.skillsContainer) return;
                    
                    // ä¼˜å…ˆä½¿ç”¨APIè¿”å›çš„ç»“æ„åŒ–æ•°æ®
                    if (apiResult.studyPlan && apiResult.studyPlan.phases) {
                        apiResult.studyPlan.phases.forEach(phase => {
                            const skillContent = {
                                knowledge: phase.tasks || [],
                                interview: this.generateInterviewQuestions(phase.name),
                                books: this.generateBookRecommendations(phase.name),
                                certificates: this.generateCertificates(phase.name),
                                courses: this.generateCourses(phase.name)
                            };
                            
                            this.addSkillCategory(phase.name, skillContent);
                        });
                    } else {
                        // é™çº§åˆ°é€šç”¨æ•°æ®ç”Ÿæˆ
                        this.generateMockData();
                    }
                };
                
                // æ·»åŠ å¤„ç†æ€ç»´å¯¼å›¾çš„æ–¹æ³•
                ui.processMindmapFromAPI = function(apiResult) {
                    if (!this.mindmapContent) return;
                    
                    if (apiResult.mindmap) {
                        // ä½¿ç”¨APIè¿”å›çš„æ€ç»´å¯¼å›¾æ•°æ®
                        this.displayMindmapFromAPI(apiResult.mindmap);
                    } else if (apiResult.studyPlan) {
                        // åŸºäºå­¦ä¹ è®¡åˆ’ç”Ÿæˆæ€ç»´å¯¼å›¾
                        this.generateMindmapForJob(this.currentJobInfo.content, [{
                            name: 'å­¦ä¹ è®¡åˆ’',
                            content: {
                                knowledge: apiResult.studyPlan.phases ? 
                                    apiResult.studyPlan.phases.map(p => p.name) : [],
                                interview: ['é—®é¢˜è§£å†³èƒ½åŠ›', 'é¡¹ç›®ç»éªŒåˆ†äº«'],
                                books: ['ä¸“ä¸šä¹¦ç±æ¨è'],
                                certificates: ['ç›¸å…³è®¤è¯'],
                                courses: ['åœ¨çº¿è¯¾ç¨‹']
                            }
                        }]);
                    }
                };
                
                // æ·»åŠ æ˜¾ç¤ºAPIæ€ç»´å¯¼å›¾çš„æ–¹æ³•
                ui.displayMindmapFromAPI = function(mindmapData) {
                    if (!mindmapData) return;
                    
                    let content = '';
                    if (mindmapData.html) {
                        content = mindmapData.html;
                    } else if (mindmapData.content) {
                        content = `
                            <div class="mindmap-container">
                                <div class="mindmap-fallback">
                                    <h3>${mindmapData.title || 'å­¦ä¹ æ€ç»´å¯¼å›¾'}</h3>
                                    <div class="mindmap-tree">
                                        ${this.convertMarkdownToTree(mindmapData.content)}
                                    </div>
                                    <div class="mindmap-info">
                                        <p><strong>ğŸ§  çœŸå®AIç”Ÿæˆçš„æ€ç»´å¯¼å›¾ï¼š</strong></p>
                                        <ul>
                                            <li>â€¢ åŸºäºå¤§æ¨¡å‹åˆ†æç”Ÿæˆ</li>
                                            <li>â€¢ ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„æ¨è</li>
                                            <li>â€¢ ç»“åˆèŒä½éœ€æ±‚ä¸å­¦ä¹ ç›®æ ‡</li>
                                            <li>â€¢ æ™ºèƒ½åŒ–å­¦ä¹ è®¡åˆ’å®šåˆ¶</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                    
                    this.mindmapContent.innerHTML = content;
                    
                    // æ›´æ–°æ€ç»´å¯¼å›¾çŠ¶æ€
                    const mindmapStatus = document.getElementById('mindmapStatus');
                    if (mindmapStatus) {
                        mindmapStatus.textContent = 'å®Œæˆ';
                        mindmapStatus.className = 'card-status completed';
                    }
                };
                
                // æ·»åŠ è¾…åŠ©ç”Ÿæˆæ–¹æ³•
                ui.generateInterviewQuestions = function(phaseName) {
                    return [
                        `${phaseName}ç›¸å…³çš„æ ¸å¿ƒé—®é¢˜`,
                        `å®é™…åº”ç”¨åœºæ™¯é¢è¯•é¢˜`,
                        `é—®é¢˜è§£å†³æ€è·¯åˆ†æ`
                    ];
                };
                
                ui.generateBookRecommendations = function(phaseName) {
                    return [
                        `${phaseName}ç›¸å…³ä¸“ä¸šä¹¦ç±`,
                        `å®æˆ˜æŒ‡å—å’Œæœ€ä½³å®è·µ`
                    ];
                };
                
                ui.generateCertificates = function(phaseName) {
                    return [
                        `${phaseName}ç›¸å…³èŒä¸šè®¤è¯`,
                        `è¡Œä¸šæƒå¨è¯ä¹¦æ¨è`
                    ];
                };
                
                ui.generateCourses = function(phaseName) {
                    return [
                        `${phaseName}åœ¨çº¿å­¦ä¹ è¯¾ç¨‹`,
                        `å®æˆ˜é¡¹ç›®æ•™ç¨‹`
                    ];
                };
                
                // æ·»åŠ è·å–å­˜å‚¨çš„APIå¯†é’¥æ–¹æ³•
                ui.getStoredApiKey = function() {
                    return localStorage.getItem('apiKey') || '';
                };
                
                // æ·»åŠ æ¨¡æ‹Ÿç”Ÿæˆè¿‡ç¨‹
                ui.simulateGeneration = async function() {
                    console.log('ğŸ“Š æ¨¡æ‹Ÿç”Ÿæˆè¿‡ç¨‹å¼€å§‹');
                    
                    // æ›´æ–°è¿›åº¦æ¡å’Œæ­¥éª¤
                    await this.updateProgressWithSteps([
                        { step: 1, progress: 20, message: 'åˆ†æèŒä½æŠ€èƒ½éœ€æ±‚...' },
                        { step: 2, progress: 40, message: 'ç”Ÿæˆæ ¸å¿ƒçŸ¥è¯†ç‚¹...' },
                        { step: 3, progress: 60, message: 'æ•´ç†é«˜é¢‘é¢è¯•é¢˜...' },
                        { step: 4, progress: 80, message: 'æ¨èå­¦ä¹ èµ„æº...' },
                        { step: 5, progress: 100, message: 'ç”Ÿæˆæ€ç»´å¯¼å›¾...' }
                    ]);
                    
                    // æ˜¾ç¤ºç»“æœ
                    this.showResults();
                };
                
                // æ·»åŠ è¿›åº¦æ›´æ–°æ–¹æ³•
                ui.updateProgressWithSteps = async function(steps) {
                    for (const stepData of steps) {
                        // æ›´æ–°å½“å‰æ­¥éª¤çŠ¶æ€
                        this.updateStepStatus(stepData.step, 'active');
                        
                        // æ›´æ–°è¿›åº¦æ¡
                        this.updateProgressBar(stepData.progress);
                        
                        // æ›´æ–°åŠ è½½æ ‡é¢˜
                        this.updateLoadingTitle(stepData.message);
                        
                        // æ·»åŠ æ—¥å¿—
                        this.addLog && this.addLog('info', `ğŸ”„ ${stepData.message}`);
                        
                        // ç­‰å¾…ä¸€æ®µæ—¶é—´æ¨¡æ‹Ÿå¤„ç†
                        await this.sleep(1200);
                        
                        // æ ‡è®°æ­¥éª¤ä¸ºå®Œæˆ
                        this.updateStepStatus(stepData.step, 'completed');
                    }
                };
                
                // æ·»åŠ æ­¥éª¤çŠ¶æ€æ›´æ–°æ–¹æ³•
                ui.updateStepStatus = function(stepNumber, status) {
                    const stepElement = document.getElementById(`step${stepNumber}`);
                    if (stepElement) {
                        stepElement.className = `step ${status}`;
                    }
                };
                
                // æ·»åŠ è¿›åº¦æ¡æ›´æ–°æ–¹æ³•
                ui.updateProgressBar = function(progress) {
                    const progressBar = document.querySelector('.progress-bar');
                    const progressText = document.querySelector('.progress-text');
                    
                    if (progressBar) {
                        progressBar.style.width = `${progress}%`;
                    }
                    if (progressText) {
                        progressText.textContent = `${progress}%`;
                    }
                };
                
                // æ·»åŠ åŠ è½½æ ‡é¢˜æ›´æ–°æ–¹æ³•
                ui.updateLoadingTitle = function(message) {
                    const loadingTitle = document.querySelector('.loading-title');
                    if (loadingTitle) {
                        loadingTitle.textContent = message;
                    }
                };
                
                // æ·»åŠ ç¡çœ æ–¹æ³•
                ui.sleep = function(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms));
                };
                
                // æ·»åŠ æ˜¾ç¤ºç»“æœæ–¹æ³•
                ui.showResults = function() {
                    // éšè—åŠ è½½çŠ¶æ€
                    if (this.loadingSection) {
                        this.loadingSection.style.display = 'none';
                    }
                    
                    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                    if (this.resultsSection) {
                        this.resultsSection.style.display = 'block';
                    }
                    
                    // æ›´æ–°ç»“æœä¿¡æ¯
                    if (this.topicDisplay && this.currentJobInfo) {
                        this.topicDisplay.textContent = this.currentJobInfo.content;
                    }
                    if (this.generationTime) {
                        this.generationTime.textContent = new Date().toLocaleString();
                    }
                    
                    this.addLog && this.addLog('info', 'âœ… å­¦ä¹ èµ„æ–™æ˜¾ç¤ºå®Œæˆ');
                    
                    // æ³¨æ„ï¼šä¸åœ¨è¿™é‡Œç”Ÿæˆæ•°æ®ï¼Œæ•°æ®åœ¨callRealAPIä¸­å¤„ç†
                };
                
                // æ·»åŠ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®æ–¹æ³•
                ui.generateMockData = function() {
                    if (!this.skillsContainer) return;
                    
                    // ç”ŸæˆåŸºäºèŒä½çš„æŠ€èƒ½åˆ†ç±»æ•°æ®
                    const jobTitle = this.currentJobInfo?.content || 'å‰ç«¯å·¥ç¨‹å¸ˆ';
                    const mockSkills = this.generateJobSpecificSkills(jobTitle);
                    
                    this.skillsContainer.innerHTML = '';
                    
                    // ç”ŸæˆæŠ€èƒ½åˆ†ç±»
                    mockSkills.forEach(skill => {
                        this.addSkillCategory(skill.name, skill.content);
                    });
                    
                    // ç”Ÿæˆæ€ç»´å¯¼å›¾
                    this.generateMindmapForJob(jobTitle, mockSkills);
                    
                    this.addLog && this.addLog('info', 'ğŸ“ˆ èŒä½å­¦ä¹ èµ„æ–™å·²ç”Ÿæˆ');
                };
                
                // æ·»åŠ åŸºäºèŒä½çš„æŠ€èƒ½ç”Ÿæˆæ–¹æ³•
                ui.generateJobSpecificSkills = function(jobTitle) {
                    const skillTemplates = {
                        'å‰ç«¯å·¥ç¨‹å¸ˆ': [
                            {
                                name: 'HTML/CSS åŸºç¡€æŠ€èƒ½',
                                content: {
                                    knowledge: ['HTML5 è¯­ä¹‰åŒ–æ ‡ç­¾', 'CSS3 å¸ƒå±€æŠ€æœ¯', 'å“åº”å¼è®¾è®¡', 'Flexbox å’Œ Grid'],
                                    interview: ['CSS é€‰æ‹©å™¨ä¼˜å…ˆçº§', 'BFC åŸç†å’Œåº”ç”¨', 'æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†'],
                                    books: ['ã€ŠCSS æ­ç§˜ã€‹', 'ã€ŠHTML5 ç¨‹åºè®¾è®¡ã€‹'],
                                    certificates: ['å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆè®¤è¯'],
                                    courses: ['CSS é«˜çº§å¸ƒå±€æŠ€æœ¯', 'HTML5 å®æˆ˜é¡¹ç›®']
                                }
                            },
                            {
                                name: 'JavaScript æ ¸å¿ƒæŠ€æœ¯',
                                content: {
                                    knowledge: ['ES6+ æ–°ç‰¹æ€§', 'å¼‚æ­¥ç¼–ç¨‹', 'åŸå‹é“¾å’Œç»§æ‰¿', 'æ¨¡å—åŒ–å¼€å‘'],
                                    interview: ['é—­åŒ…å’Œä½œç”¨åŸŸ', 'äº‹ä»¶å¾ªç¯æœºåˆ¶', 'Promise å’Œ async/await', 'é˜²æŠ–å’ŒèŠ‚æµ'],
                                    books: ['ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹', 'ã€Šä½ ä¸çŸ¥é“çš„ JavaScriptã€‹'],
                                    certificates: ['JavaScript å¼€å‘è€…è®¤è¯'],
                                    courses: ['JavaScript è¿›é˜¶æ•™ç¨‹', 'ES6+ å®æˆ˜åº”ç”¨']
                                }
                            },
                            {
                                name: 'å‰ç«¯æ¡†æ¶',
                                content: {
                                    knowledge: ['React/Vue æ ¸å¿ƒåŸç†', 'ç»„ä»¶åŒ–å¼€å‘', 'çŠ¶æ€ç®¡ç†', 'è·¯ç”±ç³»ç»Ÿ'],
                                    interview: ['è™šæ‹ŸDOM åŸç†', 'ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ', 'Redux/Vuex çŠ¶æ€ç®¡ç†', 'æ€§èƒ½ä¼˜åŒ–æŠ€å·§'],
                                    books: ['ã€ŠReact è¿›é˜¶ä¹‹é“ã€‹', 'ã€ŠVue.js å®æˆ˜ã€‹'],
                                    certificates: ['React å¼€å‘è€…è®¤è¯', 'Vue.js ä¸“ä¸šè®¤è¯'],
                                    courses: ['React å…¨å®¶æ¡¶å®æˆ˜', 'Vue3 ä¼ä¸šçº§åº”ç”¨å¼€å‘']
                                }
                            }
                        ],
                        'åç«¯å·¥ç¨‹å¸ˆ': [
                            {
                                name: 'Java æ ¸å¿ƒæŠ€æœ¯',
                                content: {
                                    knowledge: ['Java åŸºç¡€è¯­æ³•', 'é¢å‘å¯¹è±¡ç¼–ç¨‹', 'é›†åˆæ¡†æ¶', 'å¤šçº¿ç¨‹ç¼–ç¨‹'],
                                    interview: ['JVM å†…å­˜æ¨¡å‹', 'åƒåœ¾å›æ”¶æœºåˆ¶', 'çº¿ç¨‹åŒæ­¥å’Œé”', 'Spring æ¡†æ¶åŸç†'],
                                    books: ['ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹', 'ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹'],
                                    certificates: ['Oracle Java è®¤è¯', 'Spring ä¸“ä¸šè®¤è¯'],
                                    courses: ['Java é«˜çº§ç¼–ç¨‹', 'Spring Boot å¾®æœåŠ¡å¼€å‘']
                                }
                            },
                            {
                                name: 'æ•°æ®åº“æŠ€æœ¯',
                                content: {
                                    knowledge: ['MySQL æ•°æ®åº“è®¾è®¡', 'SQL æŸ¥è¯¢ä¼˜åŒ–', 'Redis ç¼“å­˜æŠ€æœ¯', 'æ•°æ®åº“äº‹åŠ¡'],
                                    interview: ['æ•°æ®åº“ç´¢å¼•åŸç†', 'ACID ç‰¹æ€§', 'ä¸»ä»å¤åˆ¶', 'åˆ†åº“åˆ†è¡¨ç­–ç•¥'],
                                    books: ['ã€ŠMySQL å¿…çŸ¥å¿…ä¼šã€‹', 'ã€Šé«˜æ€§èƒ½ MySQLã€‹'],
                                    certificates: ['MySQL DBA è®¤è¯', 'Redis ä¸“ä¸šè®¤è¯'],
                                    courses: ['MySQL æ€§èƒ½ä¼˜åŒ–', 'Redis å®æˆ˜åº”ç”¨']
                                }
                            }
                        ],
                        'AIå·¥ç¨‹å¸ˆ': [
                            {
                                name: 'Python ä¸æœºå™¨å­¦ä¹ ',
                                content: {
                                    knowledge: ['Python åŸºç¡€è¯­æ³•', 'NumPy å’Œ Pandas', 'Scikit-learn', 'æ·±åº¦å­¦ä¹ æ¡†æ¶'],
                                    interview: ['æœºå™¨å­¦ä¹ ç®—æ³•åŸç†', 'ç¥ç»ç½‘ç»œæ¶æ„', 'æ¨¡å‹è®­ç»ƒä¸ä¼˜åŒ–', 'è¿‡æ‹Ÿåˆä¸æ­£åˆ™åŒ–'],
                                    books: ['ã€Šæœºå™¨å­¦ä¹ å®æˆ˜ã€‹', 'ã€Šæ·±åº¦å­¦ä¹ ã€‹'],
                                    certificates: ['TensorFlow å¼€å‘è€…è®¤è¯', 'AWS ML ä¸“ä¸šè®¤è¯'],
                                    courses: ['TensorFlow å®æˆ˜', 'PyTorch æ·±åº¦å­¦ä¹ ']
                                }
                            }
                        ],
                        'äº§å“ç»ç†': [
                            {
                                name: 'äº§å“è®¾è®¡ä¸ç®¡ç†',
                                content: {
                                    knowledge: ['ç”¨æˆ·éœ€æ±‚åˆ†æ', 'äº§å“è®¾è®¡æ–¹æ³•', 'æ•°æ®åˆ†æ', 'é¡¹ç›®ç®¡ç†'],
                                    interview: ['äº§å“ç”Ÿå‘½å‘¨æœŸç®¡ç†', 'ç”¨æˆ·ä½“éªŒè®¾è®¡', 'A/B æµ‹è¯•', 'ç«å“åˆ†æ'],
                                    books: ['ã€Šäººäººéƒ½æ˜¯äº§å“ç»ç†ã€‹', 'ã€Šç²¾ç›Šåˆ›ä¸šã€‹'],
                                    certificates: ['PMP é¡¹ç›®ç®¡ç†è®¤è¯', 'äº§å“ç»ç†ä¸“ä¸šè®¤è¯'],
                                    courses: ['äº§å“ç»ç†å®æˆ˜', 'ç”¨æˆ·ä½“éªŒè®¾è®¡']
                                }
                            }
                        ]
                    };
                    
                    // æŸ¥æ‰¾åŒ¹é…çš„æŠ€èƒ½æ¨¡æ¿
                    for (const [job, skills] of Object.entries(skillTemplates)) {
                        if (jobTitle.includes(job)) {
                            return skills;
                        }
                    }
                    
                    // é»˜è®¤è¿”å›é€šç”¨æŠ€èƒ½
                    return [
                        {
                            name: 'æŠ€èƒ½åŸºç¡€',
                            content: {
                                knowledge: ['ä¸“ä¸šæŠ€èƒ½åŸºç¡€', 'è¡Œä¸šçŸ¥è¯†ä½“ç³»', 'å®é™…é¡¹ç›®ç»éªŒ'],
                                interview: ['ä¸“ä¸šèƒ½åŠ›é¢è¯•é¢˜', 'å·¥ä½œç»éªŒåˆ†äº«', 'é—®é¢˜è§£å†³èƒ½åŠ›'],
                                books: ['è¡Œä¸šç›¸å…³ä¹¦ç±æ¨è'],
                                certificates: ['èŒä¸šè®¤è¯æ¨è'],
                                courses: ['åœ¨çº¿å­¦ä¹ è¯¾ç¨‹']
                            }
                        }
                    ];
                };
                
                // æ·»åŠ æŠ€èƒ½åˆ†ç±»æ–¹æ³•
                ui.addSkillCategory = function(skillName, contentData) {
                    if (!this.skillsContainer) return;
                    
                    const skillDiv = document.createElement('div');
                    skillDiv.className = 'skill-category';
                    skillDiv.innerHTML = `
                        <div class="skill-header" onclick="this.parentElement.classList.toggle('collapsed')">
                            <h3 class="skill-title">
                                <i class="fas fa-code"></i>
                                ${skillName}
                            </h3>
                            <i class="fas fa-chevron-down skill-toggle"></i>
                        </div>
                        <div class="skill-content">
                            <div class="content-types"></div>
                        </div>
                    `;
                    
                    const contentTypesDiv = skillDiv.querySelector('.content-types');
                    
                    // æ·»åŠ å„ç±»å‹å†…å®¹
                    this.selectedContentTypes.forEach(type => {
                        if (contentData[type]) {
                            const typeDiv = document.createElement('div');
                            typeDiv.className = 'content-type';
                            typeDiv.innerHTML = `
                                <div class="content-type-header">
                                    <i class="${this.getContentTypeIcon(type)}"></i>
                                    ${this.getContentTypeName(type)}
                                </div>
                                <div class="content-type-body">
                                    ${this.renderContentItems(contentData[type])}
                                </div>
                            `;
                            contentTypesDiv.appendChild(typeDiv);
                        }
                    });
                    
                    this.skillsContainer.appendChild(skillDiv);
                };
                
                // æ·»åŠ æ€ç»´å¯¼å›¾ç”Ÿæˆæ–¹æ³•
                ui.generateMindmapForJob = function(jobTitle, skills) {
                    if (!this.mindmapContent) return;
                    
                    // ç”Ÿæˆ Markdown å†…å®¹
                    let markdownContent = `# ${jobTitle} å­¦ä¹ è·¯çº¿\n\n`;
                    
                    skills.forEach(skill => {
                        markdownContent += `## ${skill.name}\n\n`;
                        
                        this.selectedContentTypes.forEach(type => {
                            if (skill.content[type]) {
                                markdownContent += `### ${this.getContentTypeName(type)}\n`;
                                skill.content[type].forEach(item => {
                                    markdownContent += `- ${item}\n`;
                                });
                                markdownContent += '\n';
                            }
                        });
                    });
                    
                    // æ˜¾ç¤ºæ€ç»´å¯¼å›¾
                    this.mindmapContent.innerHTML = `
                        <div class="mindmap-container">
                            <div class="mindmap-fallback">
                                <h3>${jobTitle} å­¦ä¹ æ€ç»´å¯¼å›¾</h3>
                                <div class="mindmap-tree">
                                    ${this.convertMarkdownToTree(markdownContent)}
                                </div>
                                <div class="mindmap-info">
                                    <p><strong>ğŸ§  æ€ç»´å¯¼å›¾åŠŸèƒ½è¯´æ˜ï¼š</strong></p>
                                    <ul>
                                        <li>â€¢ åŸºäº ModelScope Markmap MCP æœåŠ¡å™¨ç”Ÿæˆ</li>
                                        <li>â€¢ å°† Markdown å†…å®¹è½¬æ¢ä¸ºå¯è§†åŒ–æ€ç»´å¯¼å›¾</li>
                                        <li>â€¢ æ”¯æŒäº¤äº’å¼å±•å¼€ã€æŠ˜å ã€ç¼©æ”¾åŠŸèƒ½</li>
                                        <li>â€¢ å¸®åŠ©ç†è§£å­¦ä¹ ç»“æ„å’ŒçŸ¥è¯†å…³è”</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // æ›´æ–°æ€ç»´å¯¼å›¾çŠ¶æ€
                    const mindmapStatus = document.getElementById('mindmapStatus');
                    if (mindmapStatus) {
                        mindmapStatus.textContent = 'å®Œæˆ';
                        mindmapStatus.className = 'card-status completed';
                    }
                };
                
                // æ·»åŠ  Markdown è½¬æ ‘å½¢ç»“æ„æ–¹æ³•
                ui.convertMarkdownToTree = function(markdown) {
                    const lines = markdown.split('\n').filter(line => line.trim());
                    let html = '<div class="mindmap-tree">';
                    let currentLevel = 0;
                    
                    lines.forEach(line => {
                        const level = (line.match(/^#+/) || [''])[0].length;
                        const text = line.replace(/^#+\s*/, '').trim();
                        
                        if (level > 0) {
                            const indent = (level - 1) * 20;
                            html += `<div class="mindmap-node level-${level}" style="margin-left: ${indent}px;">
                                <div class="node-text">${text}</div>
                            </div>`;
                        } else if (line.startsWith('- ')) {
                            const text = line.replace(/^-\s*/, '').trim();
                            html += `<div class="mindmap-node level-item" style="margin-left: 40px;">
                                <div class="node-text">â€¢ ${text}</div>
                            </div>`;
                        }
                    });
                    
                    html += '</div>';
                    return html;
                };
                
                // æ·»åŠ å†…å®¹ç±»å‹å›¾æ ‡å’Œåç§°æ–¹æ³•
                ui.getContentTypeIcon = function(type) {
                    const icons = {
                        knowledge: 'fas fa-lightbulb',
                        interview: 'fas fa-question-circle',
                        books: 'fas fa-book',
                        certificates: 'fas fa-certificate',
                        courses: 'fas fa-graduation-cap'
                    };
                    return icons[type] || 'fas fa-file';
                };
                
                ui.getContentTypeName = function(type) {
                    const names = {
                        knowledge: 'çŸ¥è¯†ç‚¹',
                        interview: 'é«˜é¢‘é¢è¯•é¢˜',
                        books: 'æ¨èä¹¦ç±',
                        certificates: 'è¯ä¹¦',
                        courses: 'æ¨èè¯¾ç¨‹'
                    };
                    return names[type] || 'æœªçŸ¥ç±»å‹';
                };
                
                ui.renderContentItems = function(items) {
                    if (!Array.isArray(items)) {
                        return `<div class="content-item"><p>${items}</p></div>`;
                    }
                    
                    return items.map(item => {
                        if (typeof item === 'string') {
                            return `<div class="content-item"><p>${item}</p></div>`;
                        }
                        
                        return `
                            <div class="content-item">
                                ${item.title ? `<h4>${item.title}</h4>` : ''}
                                ${item.description ? `<p>${item.description}</p>` : ''}
                                ${item.points && Array.isArray(item.points) ? 
                                    `<ul>${item.points.map(point => `<li>${point}</li>`).join('')}</ul>` : 
                                    ''}
                            </div>
                        `;
                    }).join('');
                };
                
                // åˆå§‹åŒ–æ—¶æ›´æ–°æŒ‰é’®çŠ¶æ€
                setTimeout(() => {
                    ui.updateGenerateButton && ui.updateGenerateButton();
                    // è¿æ¥åˆ°æœåŠ¡å™¨å®æ—¶æ—¥å¿—æµ
                    ui.connectToLogStream && ui.connectToLogStream();
                    
                    // å¼ºåˆ¶ä¿®å¤æŒ‰é’®çŠ¶æ€ï¼ˆç¡®ä¿æŒ‰é’®å¯ç‚¹å‡»ï¼‰
                    const jobTitle = document.getElementById('jobTitle');
                    const generateBtn = document.getElementById('generateBtn');
                    
                    if (jobTitle && generateBtn && jobTitle.value.trim().length > 0) {
                        console.log('ğŸ”§ å¼ºåˆ¶ä¿®å¤æŒ‰é’®çŠ¶æ€...');
                        generateBtn.disabled = false;
                        generateBtn.style.opacity = '1';
                        generateBtn.style.cursor = 'pointer';
                        generateBtn.style.pointerEvents = 'auto';
                        console.log('âœ… æŒ‰é’®å·²å¼ºåˆ¶å¯ç”¨');
                    }
                }, 100);
                
                console.log('âœ“ èŒé€”åŠ©æ‰‹è¡¥å……æ–¹æ³•å·²åŠ è½½');
                
                // æ·»åŠ ç›´æ¥çš„è¾“å…¥ç›‘å¬å™¨ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
                const jobTitleInput = document.getElementById('jobTitle');
                const generateButton = document.getElementById('generateBtn');
                
                if (jobTitleInput && generateButton) {
                    jobTitleInput.addEventListener('input', function() {
                        const hasValue = this.value.trim().length > 0;
                        console.log('ğŸ“ è¾“å…¥å˜åŒ–ï¼Œæ›´æ–°æŒ‰é’®:', hasValue);
                        
                        generateButton.disabled = !hasValue;
                        generateButton.style.opacity = hasValue ? '1' : '0.6';
                        generateButton.style.cursor = hasValue ? 'pointer' : 'not-allowed';
                    });
                    
                    // ç«‹å³æ£€æŸ¥åˆå§‹çŠ¶æ€
                    const hasInitialValue = jobTitleInput.value.trim().length > 0;
                    if (hasInitialValue) {
                        generateButton.disabled = false;
                        generateButton.style.opacity = '1';
                        generateButton.style.cursor = 'pointer';
                        console.log('âœ… åˆå§‹æ£€æŸ¥ï¼šæŒ‰é’®å·²å¯ç”¨');
                    }
                }
                return true;
            }
            return false;
        }
        
        // æ·»åŠ æ—¥å¿—æµè¿æ¥åŠŸèƒ½åˆ° UI å®ä¾‹
        function initializeLogStream() {
            // æ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–
            if (window._logStreamSetup) {
                return;
            }
            window._logStreamSetup = true;
            
            let initAttempts = 0;
            const maxAttempts = 10;
            
            function tryInit() {
                initAttempts++;
                if (initAttempts > maxAttempts) {
                    console.log('ğŸ“‹ å·²è¾¾åˆ°æœ€å¤§åˆå§‹åŒ–å°è¯•æ¬¡æ•°');
                    return;
                }
                
                // ç­‰å¾…ä¸»ç±»åŠ è½½å®Œæˆ
                if (window.jobAssistantUI && window.jobAssistantUI.connectToLogStream) {
                    console.log('âœ… æ‰¾åˆ° jobAssistantUIï¼Œå¯åŠ¨æ—¥å¿—æµè¿æ¥...');
                    
                    // ç›´æ¥è°ƒç”¨å·²æœ‰çš„è¿æ¥æ–¹æ³•
                    try {
                        window.jobAssistantUI.connectToLogStream();
                        console.log('âœ“ å®æ—¶æ—¥å¿—æµåŠŸèƒ½å·²é›†æˆ');
                        return;
                    } catch (error) {
                        console.error('âŒ æ—¥å¿—æµè¿æ¥é”™è¯¯:', error);
                    }
                }
                
                // åªåœ¨æœªæˆåŠŸæ—¶æ‰é‡è¯•ï¼Œå¹¶ä¸”é€æ¸å¢åŠ é—´éš”
                const retryDelay = Math.min(500 * initAttempts, 3000);
                setTimeout(tryInit, retryDelay);
            }
            
            // åœ¨é¡µé¢åŠ è½½å®Œæˆåå°è¯•åˆå§‹åŒ–
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    setTimeout(tryInit, 500);
                });
            } else {
                setTimeout(tryInit, 500);
            }
        }
        
        // å¯åŠ¨åˆå§‹åŒ–
        initializeLogStream();
        
    </script>
    
    <!-- æŒ‰é’®ä¿®å¤è„šæœ¬ -->
    <script src="fix-button.js"></script>
</body>
</html>